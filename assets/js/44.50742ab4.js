(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{670:function(s,a,t){"use strict";t.r(a);var n=t(5),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("说明")]),s._v(" "),t("p",[s._v("​\t本文主要介绍如何将开发好的网站，部署到服务器")]),s._v(" "),t("p",[t("a",{attrs:{href:"www.deep-diary.com"}},[s._v("点击免费观看教学视频")])])]),s._v(" "),t("h1",{attrs:{id:"服务器部署"}},[s._v("服务器部署")]),s._v(" "),t("h2",{attrs:{id:"安装数据库"}},[s._v("安装数据库")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/2527092840af4e15a24b0b2a8bf71776.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("通过阿里云进入服务器")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/1e7ef3975db048ffab5ebd3a121a04e0.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("服务器命令界面")]),s._v(" "),t("h3",{attrs:{id:"更新ubantu相关包"}},[s._v("更新Ubantu相关包")]),s._v(" "),t("p",[s._v("登陆到Ubuntu的服务器")]),s._v(" "),t("p",[s._v("更新源：sudo apt-get update")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/2112be3cd76b4f098fc78090b15858ae.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("源已经更新完毕")]),s._v(" "),t("p",[s._v("安装源：sudo apt-get upgrade")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/41712ac4c7374418987e45a77108d7b5.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("选中Y进行安装升级")]),s._v(" "),t("h3",{attrs:{id:"第二步安装的mysql服务器"}},[s._v("第二步安装的MySQL服务器")]),s._v(" "),t("p",[s._v("执行：sudo apt-get install mysql-server")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/64e2615a292c43e789145b3489ab7f5a.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("安装mysql服务器")]),s._v(" "),t("p",[s._v("执行：sudo apt-get install mysql-client")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/badbd086c7134901b7fa08248f71cc1e.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("安装mysql客户端")]),s._v(" "),t("p",[s._v("执行：sudo apt install libmysqlclient-dev")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/d7e6913e7f0f44769899fb3adfb239be.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("安装mysql相关驱动")]),s._v(" "),t("p",[s._v("安装成功后可以通过下面的命令测试是否安装成功：")]),s._v(" "),t("p",[s._v("sudo netstat -tap | grep mysql")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/4f60280d929a46de95c185be5bb37474.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("出现类似字符，表明安装成功了")]),s._v(" "),t("p",[t("strong",[s._v("Linux netstat")]),s._v(" 命令用于显示网络状态。")]),s._v(" "),t("p",[s._v("利用 netstat 指令可让你得知整个 Linux 系统的网络情况。")]),s._v(" "),t("ul",[t("li",[s._v("-t或--tcp 显示TCP传输协议的连线状况。")]),s._v(" "),t("li",[s._v("-a或--all 显示所有连线中的Socket。")]),s._v(" "),t("li",[s._v("-p或--programs 显示正在使用Socket的程序识别码和程序名称。")])]),s._v(" "),t("p",[t("strong",[s._v("Linux grep")]),s._v(" 命令用于查找文件里符合条件的字符串。")]),s._v(" "),t("p",[s._v("grep 指令用于查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设 grep 指令会把含有范本样式的那一列显示出来。若不指定任何文件名称，或是所给予的文件名为 "),t("strong",[s._v("-")]),s._v("，则 grep 指令会从标准输入设备读取数据。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("grep [-abcEFGhHilLnqrsvVwxy][-A<显示行数>][-B<显示列数>][-C<显示列数>][-d<进行动作>][-e<范本样式>][-f<范本文件>][--help][范本样式][文件或目录...]\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"第三步更新数据库密码并登入"}},[s._v("第三步更新数据库密码并登入")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/77baff1df0fc4d719e0b967271e14c29.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("查看mysql 默认用户名，密码")]),s._v(" "),t("p",[s._v("最最重要的是：用户名默认的不是root，而是debian-sys-maint，如上图所示")]),s._v(" "),t("p",[t("strong",[s._v("先测试本地登入")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/76749ca06bd341c6a705bed8e809e554.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("本地登入成功")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/d97c18dcd1034361b418446b0737a651.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("更新密码并重新登入")]),s._v(" "),t("p",[t("strong",[s._v("启动mysql数据库")])]),s._v(" "),t("p",[s._v("sudo /etc/init.d/mysql start")]),s._v(" "),t("p",[t("strong",[s._v("重启")])]),s._v(" "),t("p",[s._v("sudo /etc/init.d/mysql restart")]),s._v(" "),t("p",[t("strong",[s._v("关闭")])]),s._v(" "),t("p",[s._v("sudo /etc/init.d/mysql stop")]),s._v(" "),t("p",[t("strong",[s._v("再测试远程登入")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/6526eff5884b4f7583aeab0498fbaf3c.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("创建新用户并授予远程访问的权限")]),s._v(" "),t("p",[s._v("应先创建新用户")]),s._v(" "),t("p",[s._v("create user 'admin'@'%' identified by 'password';")]),s._v(" "),t("p",[s._v("执行授权")]),s._v(" "),t("p",[s._v("GRANT ALL PRIVILEGES ON "),t("em",[s._v(".")]),s._v(" TO 'admin'@'%';")]),s._v(" "),t("p",[s._v("刷新")]),s._v(" "),t("p",[s._v("flush privileges;")]),s._v(" "),t("p",[s._v("授权远程")]),s._v(" "),t("p",[s._v("ALTER USER 'admin'@'%' IDENTIFIED WITH mysql_native_password BY 'password';")]),s._v(" "),t("p",[s._v("刷新")]),s._v(" "),t("p",[s._v("flush privileges;")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/9b63e45df88c4c409b4a3781ff78271a.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("远程登入步骤")]),s._v(" "),t("ol",[t("li",[s._v("编辑配置文件，取消把绑定ip从127.0.0.1 改为0.0.0.0")]),s._v(" "),t("li",[s._v("重启mysql服务")]),s._v(" "),t("li",[s._v("在远程通过命令行登入")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/83e85a5b8e5f4e20a903a8f5b1b424e3.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("更改绑定ip")]),s._v(" "),t("p",[t("strong",[s._v("使用Navicat远程登入")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/c2ad2f6d813144559be377cd71cd1bb1.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("使用Navicat 连接数据库")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/bd9c54172df645568cdee478502202b7.png",alt:"Django搭建深度日记：服务器数据库部署-深度日记官方网站"}})]),s._v(" "),t("h2",{attrs:{id:"前端代码打包"}},[s._v("前端代码打包")]),s._v(" "),t("p",[s._v("build the project")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" build\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"some-issues"}},[s._v("some issues")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" error  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" ./src/views/register/index.vue?vue"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("style"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("index")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("5bcc9eb4"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lang")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("scss"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("scoped")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\nError: Cannot "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" module "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'imagemin-gifsicle'")]),s._v("\nRequire stack:\n- D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DeepDiary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node_modules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("image-webpack-loader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("index.js\n- D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DeepDiary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node_modules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("loader-runner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("loadLoader.js\n- D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DeepDiary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node_modules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("loader-runner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("LoaderRunner.js\n- D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DeepDiary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node_modules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("NormalModule.js\n- D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DeepDiary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node_modules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("NormalModuleFactory.js\n- D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DeepDiary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node_modules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Compiler.js\n- D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DeepDiary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("node_modules"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("webpack.js\n- D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DeepDiary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("vue.config.js\n- D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DeepDiary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Frontend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("package.json\n\n\n @ ./src/views/register/index.vue?vue"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("style"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("index")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("5bcc9eb4"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lang")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("scss"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("scoped")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":0-548 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":0-548\n @ ./src/views/register/index.vue\n @ ./src/router/index.js\n @ ./src/main.js\n @ multi ./src/main.js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h3",{attrs:{id:"solutions"}},[s._v("solutions")]),s._v(" "),t("p",[s._v('1、在packgae.json 加上 “imagemin-gifsicle” ："^2.0.0",')]),s._v(" "),t("p",[s._v("2、再次运行时报错信息error:cannot find module “gifsicle” 这时就要去node_moudules里删除 image-webpack-loader")]),s._v(" "),t("p",[s._v("3、再去更新下载 cnpm install --save-dev image-webpack-loader")]),s._v(" "),t("p",[s._v("4、重新运行打包命令即可\n————————————————\n版权声明：本文为CSDN博主「玛卡巴卡阿卡哇」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。\n原文链接：https://blog.csdn.net/qq_41147046/article/details/123152703")]),s._v(" "),t("h2",{attrs:{id:"后端代码部署"}},[s._v("后端代码部署")]),s._v(" "),t("h3",{attrs:{id:"源码库打包"}},[s._v("源码库打包")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pip freeze "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" requirements.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/73be118395f349de96bb5d3682bd419e.png",alt:"Django搭建深度日记：将项目部署到服务器-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("在虚拟环境中，打包相关依赖库，便于直接在服务器进行安装")]),s._v(" "),t("h3",{attrs:{id:"本地测试依赖库"}},[s._v("本地测试依赖库")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("pip "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virtualenv\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"python-virtualenv安装报错-已解决"}},[s._v("python virtualenv安装报错，已解决")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://blog.csdn.net/Coder_Bao/article/details/113380959",target:"_blank",rel:"noopener noreferrer"}},[s._v(" python virtualenv安装报错，已解决_Dennis、的博客-CSDN博客_virtualenv报错"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("virtualenv --python"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("python3.8 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v("\nvirtualenv "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者直接创建")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 刚创建好的环境，只有很少一部分包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DeepDiary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Backend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Scripts"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("pip list\nPackage    Version\n---------- -------\npip        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22.1")]),s._v(".2\nsetuptools "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("62.5")]),s._v(".0\nwheel      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.37")]),s._v(".1\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("notice"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" A new release of pip available: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22.1")]),s._v(".2 -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22.2")]),s._v(".2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("notice"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" To update, run: python.exe -m pip "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --upgrade pip   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据提示，执行此命令")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入env 环境目录后，激活脚本")]),s._v("\n./Scripts/activate.bat    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 激活虚拟环境")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./Scripts/deactivate.bat    # 退出虚拟环境")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Windows中使用virtualenvwrapper-win，Linux中直接使用virtualenvwrapper")]),s._v("\npip "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virtualenvwrapper-win\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后使用workon查看是否安装成功")]),s._v("\nworkon\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("h4",{attrs:{id:"安装torch"}},[s._v("安装torch")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("pip3 install torch torchvision torchaudio "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("extra"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("url https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("download"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pytorch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("whl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cu113  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地安装torch")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"服务器端安装相关的环境库"}},[s._v("服务器端安装相关的环境库")]),s._v(" "),t("p",[s._v("当直接安装"),t("code",[s._v("requirements.txt")]),s._v("，会报如下的一些错误")]),s._v(" "),t("h4",{attrs:{id:"install-virtualenv"}},[s._v("install virtualenv")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("root@deep-diary:~# sudo apt-get install nginx\nroot@deep-diary:~# sudo apt-get install python3\nroot@deep-diary:~# sudo apt-get install python3-pip\nroot@deep-diary:~# sudo pip3 install virtualenv\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("之前开发时虚拟环境用的 python 自带的，为了避免读者的版本不同造成的各类错误，稳妥起见用 virtualenv 库来创建虚拟环境，操作步骤都是差不多的。")]),s._v(" "),t("p",[s._v("创建网站目录")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/home"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nBackend  Backend_Harry  deep-diary  deep_diary  sites  start.sh  venv  venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("this is the venv environment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/home"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /home/Backend")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/home/Backend"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("strong",[s._v("参数说明")]),s._v("：")]),s._v(" "),t("ul",[t("li",[s._v("-p 确保目录名称存在，不存在的就建一个。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/9d10851d06a640ed8ace6452f546baa6.png",alt:"Django搭建深度日记：将项目部署到服务器-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("将本地代码直接复制到服务器")]),s._v(" "),t("p",[s._v("接下里需要做就是将本地代码复制到服务器，这里推荐一个工具软件WinSCP, 这个软件可以使用多种协议，连接到服务器，对服务器文件进行可视化操作。")]),s._v(" "),t("p",[s._v("接着在服务器上生成虚拟环境，在这里用 virtualenv 生成并激活了虚拟环境：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("root@deep-diary:/home/sites/deep-diary.com"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# virtualenv --python=python3.8 venv_diary")]),s._v("\ncreated virtual environment CPython3.8.10.final.0-64 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" 840ms\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /home/venv_diary/bin/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/home/venv_diary/bin"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deactivate  # deactivate the venv")]),s._v("\nroot@deep-diary:/home/venv_diary/bin"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source activate   # activate the venv")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/home/venv_diary/bin"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"安装insightface"}},[t("strong",[s._v("安装"),t("code",[s._v("insightface")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Before installing the package via pip, first "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" the following packages\n\npip "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -U Cython cmake numpy\nand "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" finally use\n\npip "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -U insightface\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"安装torch-2"}},[s._v("安装torch")]),s._v(" "),t("p",[s._v("这个原因主要来自于window和linux不兼容引起的")]),s._v(" "),t("h5",{attrs:{id:"linux-下查看cuda版本"}},[s._v("linux 下查看cuda版本")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://blog.csdn.net/hb_learing/article/details/115534219",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux查看当前Cuda（CUDA Toolkit ）版本_查无此人☞的博客-CSDN博客_linux查看cuda版本命令"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/home/Backend"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nvcc -V")]),s._v("\n\nCommand "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nvcc'")]),s._v(" not found, but can be installed with:\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nvidia-cuda-toolkit\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果报错，可以尝试执行 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" upgrade\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装成功后，再次执行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/home/Backend"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nvcc -V")]),s._v("\nnvcc: NVIDIA "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("R"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Cuda compiler driver\nCopyright "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2005")]),s._v("-2019 NVIDIA Corporation\nBuilt on Sun_Jul_28_19:07:16_PDT_2019\nCuda compilation tools, release "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.1")]),s._v(", V10.1.243  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到这个linux系统的cuda是V10.1 版本的")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h5",{attrs:{id:"安装pytorch"}},[s._v("安装pytorch")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://blog.csdn.net/weixin_43975982/article/details/105165640",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux下安装pytorch_音序的博客-CSDN博客_linux安装pytorch"),t("OutboundLink")],1)])]),s._v(" "),t("p",[s._v("这里一定需要选择跟cuda版本匹配的torch")]),s._v(" "),t("p",[s._v("官网上会显示所有历史版本，网址链接如下"),t("a",{attrs:{href:"https://pytorch.org/get-started/previous-versions/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Previous PyTorch Versions | PyTorch"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CUDA 10.1")]),s._v("\nconda "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pytorch")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.7")]),s._v(".1 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torchvision")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),s._v(".2 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torchaudio")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v(".2 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cudatoolkit")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.1")]),s._v(" -c pytorch\npip "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torch")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.7")]),s._v(".1+cu101 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torchvision")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),s._v(".2+cu101 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torchaudio")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v(".2 -f https://download.pytorch.org/whl/torch_stable.html\n\npip "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torch")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.11")]),s._v(".0+cpu "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torchvision")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.12")]),s._v(".0+cpu "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("torchaudio")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.11")]),s._v(".0 --extra-index-url https://download.pytorch.org/whl/cpu "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cpu 版本 ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"clone-code"}},[s._v("clone code")]),s._v(" "),t("p",[s._v("commit the code")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'change the database structure'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("登入仓库查看状态")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20230626215012510.png",alt:"image-20230626215012510"}})]),s._v(" "),t("p",[s._v("复制代码地址")]),s._v(" "),t("p",[s._v("首先需要在服务器上配置密钥")]),s._v(" "),t("h5",{attrs:{id:"第一步-检查本地主机是否已经存在ssh-key"}},[s._v("第一步：检查本地主机是否已经存在ssh key")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/.ssh\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n//看是否存在 id_rsa 和 id_rsa.pub文件，如果存在，说明已经有SSH Key\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("如下图所示，则表明已经存在")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@deep-diary:~/.ssh"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nauthorized_keys  id_rsa  id_rsa.pub  known_hosts\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h5",{attrs:{id:"第二步-生成ssh-key"}},[s._v("第二步：生成ssh key")]),s._v(" "),t("p",[s._v("如果不存在ssh key，使用如下命令生成")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ssh-keygen -t rsa -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx@xxx.com"')]),s._v("\n//执行后一直回车即可\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("生成完以后再用第二步命令，查看ssh key")]),s._v(" "),t("h5",{attrs:{id:"第三步-获取ssh-key公钥内容-id-rsa-pub"}},[s._v("第三步：获取ssh key公钥内容（id_rsa.pub）")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/.ssh\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" id_rsa.pub\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("如下图所示，复制该内容")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@deep-diary:~/.ssh"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat id_rsa.pub ")]),s._v("\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDM14y4TexOKh92NCsllUWjPiYodTrR/Q4Yn336UoodENdeGAFNQBTMds0dWybZfumX+EU1J6N+t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("fgMtAWuiJjMXN9xvqOXvf2tSC3ajPVI/u3/zVJWSt2gh9nKTesK2D+oFbMy+rmQ6fz20SQzSSC8ArWr+Aw6Xku3m738hvfFUKn5Wagp4An6altkzbsk5FeoOqk0"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" deep-diary@qq.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h5",{attrs:{id:"第四步-github账号上添加公钥"}},[s._v("第四步：Github账号上添加公钥")]),s._v(" "),t("p",[s._v("进入Settings设置")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20230626223808041.png",alt:"image-20230626223808041"}})]),s._v(" "),t("p",[s._v("添加成功后如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20230626223933085.png",alt:"image-20230626223933085"}})]),s._v(" "),t("p",[s._v("接下来就可以clone代码了")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone -b dev git@github.com:0xWeb3Journey/DeepDiary.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("-b")]),s._v(" 表示clone分支")]),s._v(" "),t("h4",{attrs:{id:"复制配置文件"}},[s._v("复制配置文件")]),s._v(" "),t("p",[s._v("考虑到项目有些账号信息，不方面push到github上，因此需要单独复制到服务器")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20230626230135540.png",alt:"image-20230626230135540"}})]),s._v(" "),t("h4",{attrs:{id:"安装requirements-txt"}},[s._v("安装requirements.txt")]),s._v(" "),t("h5",{attrs:{id:"安装相关依赖库"}},[s._v("安装相关依赖库")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("pip "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -r requirements.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"click-and-openmim"}},[s._v("click and openmim")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ERROR: Cannot "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -r requirements.txt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("line "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("113")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", -r requirements.txt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("line "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", -r requirements.txt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("line "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", -r requirements.txt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("line "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", -r requirements.txt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("line "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("click")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.1")]),s._v(".3 and "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("openmim")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(".5 because these package versions have conflicting dependencies.\n\nThe conflict is caused by:\n    The user requested "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("click")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.1")]),s._v(".3\n    celery "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.2")]),s._v(".7 depends on click"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.0")]),s._v(" and "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".3\n    click-didyoumean "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v(".0 depends on click"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n    click-plugins "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1 depends on click"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v("\n    click-repl "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v(".0 depends on click\n    model-index "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(".11 depends on click\n    openmim "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(".5 depends on "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Click")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.1")]),s._v(".2\n\nTo fix this you could try to:\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". loosen the range of package versions you've specified\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". remove package versions to allow pip attempt to solve the dependency conflict\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h5",{attrs:{id:"pywin32"}},[s._v("pywin32")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ERROR: No matching distribution found "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pywin32")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("304")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pywin32是一个第三方模块库，主要的作用是方便python开发者快速调用windows API的一个模块库。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同时pywin32也是绝大部分windows上第三方python模块库的前提，例如wmi，如果没有安装pywin32是无法正常使用wmi这个三方模块库的。")]),s._v("\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("absl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("py"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\naddict"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\naiohttp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\naiosignal"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nalbumentations"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\naliyun"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("python"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("core"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".36")]),s._v("\naliyun"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("python"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("kms"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.15")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nargon2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cffi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nargon2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cffi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bindings"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nasgiref"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nasttokens"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("timeout"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nattrs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nbackcall"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nbackports"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zoneinfo"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nbase58"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nbeautifulsoup4"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.11")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nbitarray"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nbleach"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nboltons"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ncchardet"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".7")]),s._v("\ncertifi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021.10")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".8")]),s._v("\ncffi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.15")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ncharset"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("normalizer"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),s._v("\nclick"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\ncmake"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.24")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ncolorama"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v("\ncommonmark"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ncoreschema"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v("\ncrcmod"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.7")]),s._v("\ncryptography"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ncycler"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.11")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nCython"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.29")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".32")]),s._v("\ncytoolz"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.12")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndebugpy"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndecorator"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ndefusedxml"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nDjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".9")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("allauth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.47")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("appconf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ckeditor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cors"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("headers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("extensions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("filter")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21.1")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("imagekit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("js"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("asset"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mdeditor"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".20")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("model"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("utils"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mptt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("notifications"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("hq"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("oss"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("storage"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("reset"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("\ndjango"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("taggit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndjangorestframework"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ndjangorestframework"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("jwt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.11")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndjangorestframework"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("simplejwt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\neasydict"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.9")]),s._v("\nentrypoints"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4")]),s._v("\neth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("abi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\neth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("account"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".9")]),s._v("\neth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("hash")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\neth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("keyfile"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\neth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("keys"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v("\neth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rlp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\neth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("typing"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\neth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("utils"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.9")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("\nexecuting"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("\nfastjsonschema"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.15")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("\nfilestools"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nflatbuffers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("\nfonttools"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.32")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nfrozenlist"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nhexbytes"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nidna"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.3")]),s._v("\nimage"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".33")]),s._v("\nimageio"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.16")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nimportlib"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("metadata"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.10")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nimportlib"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("resources"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ninsightface"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\ninterchange"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v("\nipfshttpclient"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("0a2\nipykernel"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nipython"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nipython"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("genutils"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\njedi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.18")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nJinja2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\njmespath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.10")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\njoblib"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\njsonfield"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\njsonschema"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\njupyter"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\njupyter"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("core"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.10")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\njupyterlab"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pygments"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nkiwisolver"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nlru"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("dict")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".8")]),s._v("\nMarkdown"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".6")]),s._v("\nMarkupSafe"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nmatplotlib"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nmatplotlib"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("inline"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("\nmistune"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v("\nmodel"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".11")]),s._v("\nmonotonic"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.6")]),s._v("\nmultiaddr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".9")]),s._v("\nmultidict"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nmysqlclient"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nnbclient"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nnbconvert"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nnbformat"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nneo4j"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("driver"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("\nnest"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("asyncio"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("\nnetaddr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nnetworkx"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.8")]),s._v("\nnotebook"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".11")]),s._v("\nnumpy"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.23")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\noauthlib"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nonnx"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.11")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nonnxruntime"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.11")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nopencv"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("contrib"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("python"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".64")]),s._v("\nopencv"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("python"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("headless"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".64")]),s._v("\nopenmim"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("\nordered"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\noss2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.15")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\npackaging"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21.3")]),s._v("\npandas"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\npandocfilters"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\npansi"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020.7")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("\nparsimonious"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nparso"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("\npickleshare"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("\npilkit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v("\nPillow"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nprettytable"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nprometheus"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.14")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nprompt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("toolkit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".29")]),s._v("\nprotobuf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.20")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\npsutil"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.9")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\npure"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("eval")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\npy2neo"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("\npycallgraph"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\npycocotools"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v("\npycparser"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.21")]),s._v("\npycryptodome"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.14")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\npyexiv2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.7")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nPygments"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.11")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nPyJWT"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.7")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\npymongo"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\npyparsing"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".8")]),s._v("\npyperclip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\npyrsistent"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.18")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\npython"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dateutil"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\npython"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mcs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\npython3"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("openid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\npytz"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021.3")]),s._v("\nPyWavelets"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\npywin32"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("304")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 得把这个包去掉，这个用于win下面的,# pywin32是一个第三方模块库，主要的作用是方便python开发者快速调用windows API的一个模块库。")]),s._v("\npywinpty"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 得把这个包去掉，这个用于win下面的")]),s._v("\nPyYAML"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.0")]),s._v("\npyzmq"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nq"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v("\nqudida"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v("\nregex"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".24")]),s._v("\nrequests"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.27")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nrequests"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("oauthlib"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nrequests"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("toolbelt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nrich"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nrlp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nscikit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("image"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.19")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nscikit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("learn"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nscipy"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nSend2Trash"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nsignals"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nsix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.16")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nsoupsieve"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("post1\nsqlparse"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nstack"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nswapper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ntabulate"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".9")]),s._v("\nterminado"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("\nterminaltables"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".10")]),s._v("\nthreadpoolctl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ntifffile"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".8")]),s._v("\ntinycss2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ntoolz"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.12")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ntorch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.12")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("cu113\ntorchaudio"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.12")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("cu113\ntorchvision"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("cu113\ntornado"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.1")]),s._v("\ntqdm"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.64")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ntraitlets"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ntransaction"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ntyping_extensions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ntzdata"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021.5")]),s._v("\nurllib3"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.26")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".8")]),s._v("\nvarint"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\nwcwidth"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("\nweb3"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.30")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nwebencodings"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nwebsockets"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.1")]),s._v("\nyapf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.32")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nyarl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.8")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\nzipp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.7")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\nzope"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("interface"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.4")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\ndrf_spectacular"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.26")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v(" \ninflection"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(" \nuritemplate"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br"),t("span",{staticClass:"line-number"},[s._v("119")]),t("br"),t("span",{staticClass:"line-number"},[s._v("120")]),t("br"),t("span",{staticClass:"line-number"},[s._v("121")]),t("br"),t("span",{staticClass:"line-number"},[s._v("122")]),t("br"),t("span",{staticClass:"line-number"},[s._v("123")]),t("br"),t("span",{staticClass:"line-number"},[s._v("124")]),t("br"),t("span",{staticClass:"line-number"},[s._v("125")]),t("br"),t("span",{staticClass:"line-number"},[s._v("126")]),t("br"),t("span",{staticClass:"line-number"},[s._v("127")]),t("br"),t("span",{staticClass:"line-number"},[s._v("128")]),t("br"),t("span",{staticClass:"line-number"},[s._v("129")]),t("br"),t("span",{staticClass:"line-number"},[s._v("130")]),t("br"),t("span",{staticClass:"line-number"},[s._v("131")]),t("br"),t("span",{staticClass:"line-number"},[s._v("132")]),t("br"),t("span",{staticClass:"line-number"},[s._v("133")]),t("br"),t("span",{staticClass:"line-number"},[s._v("134")]),t("br"),t("span",{staticClass:"line-number"},[s._v("135")]),t("br"),t("span",{staticClass:"line-number"},[s._v("136")]),t("br"),t("span",{staticClass:"line-number"},[s._v("137")]),t("br"),t("span",{staticClass:"line-number"},[s._v("138")]),t("br"),t("span",{staticClass:"line-number"},[s._v("139")]),t("br"),t("span",{staticClass:"line-number"},[s._v("140")]),t("br"),t("span",{staticClass:"line-number"},[s._v("141")]),t("br"),t("span",{staticClass:"line-number"},[s._v("142")]),t("br"),t("span",{staticClass:"line-number"},[s._v("143")]),t("br"),t("span",{staticClass:"line-number"},[s._v("144")]),t("br"),t("span",{staticClass:"line-number"},[s._v("145")]),t("br"),t("span",{staticClass:"line-number"},[s._v("146")]),t("br"),t("span",{staticClass:"line-number"},[s._v("147")]),t("br"),t("span",{staticClass:"line-number"},[s._v("148")]),t("br"),t("span",{staticClass:"line-number"},[s._v("149")]),t("br"),t("span",{staticClass:"line-number"},[s._v("150")]),t("br"),t("span",{staticClass:"line-number"},[s._v("151")]),t("br"),t("span",{staticClass:"line-number"},[s._v("152")]),t("br"),t("span",{staticClass:"line-number"},[s._v("153")]),t("br"),t("span",{staticClass:"line-number"},[s._v("154")]),t("br"),t("span",{staticClass:"line-number"},[s._v("155")]),t("br"),t("span",{staticClass:"line-number"},[s._v("156")]),t("br"),t("span",{staticClass:"line-number"},[s._v("157")]),t("br"),t("span",{staticClass:"line-number"},[s._v("158")]),t("br"),t("span",{staticClass:"line-number"},[s._v("159")]),t("br"),t("span",{staticClass:"line-number"},[s._v("160")]),t("br"),t("span",{staticClass:"line-number"},[s._v("161")]),t("br"),t("span",{staticClass:"line-number"},[s._v("162")]),t("br"),t("span",{staticClass:"line-number"},[s._v("163")]),t("br"),t("span",{staticClass:"line-number"},[s._v("164")]),t("br"),t("span",{staticClass:"line-number"},[s._v("165")]),t("br"),t("span",{staticClass:"line-number"},[s._v("166")]),t("br"),t("span",{staticClass:"line-number"},[s._v("167")]),t("br"),t("span",{staticClass:"line-number"},[s._v("168")]),t("br"),t("span",{staticClass:"line-number"},[s._v("169")]),t("br"),t("span",{staticClass:"line-number"},[s._v("170")]),t("br"),t("span",{staticClass:"line-number"},[s._v("171")]),t("br"),t("span",{staticClass:"line-number"},[s._v("172")]),t("br"),t("span",{staticClass:"line-number"},[s._v("173")]),t("br"),t("span",{staticClass:"line-number"},[s._v("174")]),t("br"),t("span",{staticClass:"line-number"},[s._v("175")]),t("br"),t("span",{staticClass:"line-number"},[s._v("176")]),t("br"),t("span",{staticClass:"line-number"},[s._v("177")]),t("br"),t("span",{staticClass:"line-number"},[s._v("178")]),t("br"),t("span",{staticClass:"line-number"},[s._v("179")]),t("br"),t("span",{staticClass:"line-number"},[s._v("180")]),t("br"),t("span",{staticClass:"line-number"},[s._v("181")]),t("br"),t("span",{staticClass:"line-number"},[s._v("182")]),t("br"),t("span",{staticClass:"line-number"},[s._v("183")]),t("br"),t("span",{staticClass:"line-number"},[s._v("184")]),t("br"),t("span",{staticClass:"line-number"},[s._v("185")]),t("br"),t("span",{staticClass:"line-number"},[s._v("186")]),t("br"),t("span",{staticClass:"line-number"},[s._v("187")]),t("br"),t("span",{staticClass:"line-number"},[s._v("188")]),t("br"),t("span",{staticClass:"line-number"},[s._v("189")]),t("br"),t("span",{staticClass:"line-number"},[s._v("190")]),t("br"),t("span",{staticClass:"line-number"},[s._v("191")]),t("br"),t("span",{staticClass:"line-number"},[s._v("192")]),t("br"),t("span",{staticClass:"line-number"},[s._v("193")]),t("br"),t("span",{staticClass:"line-number"},[s._v("194")]),t("br"),t("span",{staticClass:"line-number"},[s._v("195")]),t("br"),t("span",{staticClass:"line-number"},[s._v("196")]),t("br"),t("span",{staticClass:"line-number"},[s._v("197")]),t("br"),t("span",{staticClass:"line-number"},[s._v("198")]),t("br"),t("span",{staticClass:"line-number"},[s._v("199")]),t("br"),t("span",{staticClass:"line-number"},[s._v("200")]),t("br"),t("span",{staticClass:"line-number"},[s._v("201")]),t("br"),t("span",{staticClass:"line-number"},[s._v("202")]),t("br"),t("span",{staticClass:"line-number"},[s._v("203")]),t("br"),t("span",{staticClass:"line-number"},[s._v("204")]),t("br"),t("span",{staticClass:"line-number"},[s._v("205")]),t("br")])]),t("h5",{attrs:{id:"anyjson"}},[s._v("anyjson")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Collecting "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("anyjson")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v(".3\n  Downloading http://mirrors.cloud.aliyuncs.com/pypi/packages/c3/4d/d4089e1a3dd25b46bebdb55a992b0797cff657b4477bc32ce28038fdecbc/anyjson-0.3.3.tar.gz "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.3")]),s._v(" kB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Preparing metadata "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("setup.py"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". error\n  error: subprocess-exited-with-error\n  \n  × python setup.py egg_info did not run successfully.\n  │ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" code: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  ╰─"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" lines of output"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      /home/venv_diary/lib/python3.8/site-packages/setuptools/dist.py:723: UserWarning: Usage of dash-separated "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index-url'")]),s._v(" will not be supported "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" future versions. Please use the underscore name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index_url'")]),s._v(" instead\n        warnings.warn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      error "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" anyjson setup command: use_2to3 is invalid.\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("end of output"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  \n  note: This error originates from a subprocess, and is likely not a problem with pip.\nerror: metadata-generation-failed\n\n× Encountered error "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" generating package metadata.\n╰─"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" See above "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" output.\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h5",{attrs:{id:"celery-with-redis"}},[s._v("celery-with-redis")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("INFO: pip is looking at multiple versions of "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Python from Requires-Python"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" to determine "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" version is compatible with other requirements. This could take a while.\nERROR: Cannot "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -r requirements.txt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("line "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" and "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("celery")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.2")]),s._v(".7 because these package versions have conflicting dependencies.\n\nThe conflict is caused by:\n    The user requested "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("celery")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.2")]),s._v(".7\n    celery-with-redis "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v(" depends on celery"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v(" and "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v("\n\nTo fix this you could try to:\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". loosen the range of package versions you've specified\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". remove package versions to allow pip attempt to solve the dependency conflict\n\nERROR: ResolutionImpossible: "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" visit https://pip.pypa.io/en/latest/topics/dependency-resolution/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#dealing-with-dependency-conflicts")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h5",{attrs:{id:"all-the-error-packages"}},[s._v("all the error packages")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("pywin32"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("304")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 得把这个包去掉，这个用于win下面的,# pywin32是一个第三方模块库，主要的作用是方便python开发者快速调用windows API的一个模块库。")]),s._v("\npywinpty"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 得把这个包去掉，这个用于win下面的")]),s._v("\nanyjson"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# delete first")]),s._v("\npycallgraph"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# delete first")]),s._v("\ncelery"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# version conflict")]),s._v("\ntorch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.12")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("cu113  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# win is different with linux")]),s._v("\ntorchaudio"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.12")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("cu113  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# win is different with linux")]),s._v("\ntorchvision"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.13")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("cu113  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# win is different with linux")]),s._v("\nclick"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("\nopenmim"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# delete first")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"collect-the-static-files"}},[s._v("collect the static files")]),s._v(" "),t("p",[s._v("执行这个操作之前，需要确认相关的配置参数已经修改")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改项。关闭调试模式")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭后 django 不再处理静态资源")]),s._v("\nDEBUG "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改项。允许所有的IP访问网络服务")]),s._v("\nALLOWED_HOSTS "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改项。指定需要收集的静态文件的位置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 即前端打包文件所在位置")]),s._v("\nSTATICFILES_DIRS "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    os"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BASE_DIR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"frontend/dist/"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新增项。静态文件收集目录")]),s._v("\nSTATIC_ROOT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" os"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BASE_DIR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'collected_static'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("执行")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/home/Backend"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# python3 manage.py collectstatic")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1965")]),s._v(" static files copied to "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/home/Backend/collected_static'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("----------\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("==如果使用是阿里云后端，静态文件会保存到阿里云bulk中==")]),s._v(" "),t("h4",{attrs:{id:"migrate"}},[s._v("migrate")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/home/Backend"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# python3 manage.py migrate")]),s._v("\nOperations to perform:\n  Apply all migrations: admin, article, auth, comment, contenttypes, face, library, project, sessions, taggit, user_info, utils\nRunning migrations:\n  Applying contenttypes.0001_initial"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". OK\n  Applying taggit.0001_initial"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". OK\n  Applying taggit.0002_auto_20150616_2121"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". OK\n  Applying contenttypes.0002_remove_content_type_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". OK\n  Applying taggit.0003_taggeditem_add_unique_index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". OK\n  Applying auth.0001_initial"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". OK\n  Applying auth.0002_alter_permission_name_max_length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". OK\n。。。。。。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h5",{attrs:{id:"unknown-database-deep-diary"}},[s._v("Unknown database 'deep-diary'")]),s._v(" "),t("p",[s._v("create an new database")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20221123102805177.png",alt:"image-20221123102805177"}})]),s._v(" "),t("p",[s._v("如果migrate 报错，可以尝试用")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("deep_diary# python3 manage.py migrate --fake\n初始化已存在的表 migrate --fake-initial\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("代码部署基本就完成了，接下来就是配置 Nginx 。")]),s._v(" "),t("h5",{attrs:{id:"create-superuser"}},[s._v("create superuser")]),s._v(" "),t("div",{staticClass:"language-·shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(venv_diary) root@deep-diary:/home/Backend# python manage.py createsuperuser\nUsername: blue\nEmail address: deep-diary@qq.com\nPassword: \nPassword (again): \nSuperuser created successfully.\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"nginx"}},[s._v("Nginx")]),s._v(" "),t("p",[s._v("server IP: http://121.43.166.145/")]),s._v(" "),t("p",[s._v("Nginx 欢迎界面这个默认配置显然是不能用的，所以需要重新写 Nginx 的配置文件。 "),t("code",[s._v("/etc/nginx/sites-available")]),s._v(" 目录是定义 "),t("strong",[s._v("Nginx 可用配置")]),s._v("的地方。输入指令创建配置文件 "),t("code",[s._v("gallery")]),s._v(" 并打开 "),t("strong",[s._v("vim 编辑器")]),s._v("：")]),s._v(" "),t("h4",{attrs:{id:"config-the-gallery-nginx-file"}},[s._v("config the gallery Nginx file")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/etc/nginx/sites-available"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim gallery")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  charset utf-8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  server_name "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.43")]),s._v(".166.145"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改成你的 IP")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义 server 的根路径")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改为你的项目的路径")]),s._v("\n  root /home/Backend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以下4项都是在给静态资源配置转发路径")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意路径名称一定要正确")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 特别是中横线 - 和下划线 _ 别弄混了")]),s._v("\n  location /static "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/collected_static"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  location /media "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/media"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  location /js "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/collected_static/js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  location /css "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/collected_static/css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  location /fonts "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/collected_static/fonts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  location /img "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/collected_static/img"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将接口及后台请求转发给 Gunicorn")]),s._v("\n    location ~ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("^/api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("^/admin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    proxy_set_header Host "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_pass http://unix:/tmp/121.43.166.145.socket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改成你的 IP")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 其他所有请求均直接请求 Vue 打包的 html 文件")]),s._v("\n  location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    try_files /collected_static/index.html "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br")])]),t("p",[s._v("此配置会监听 80 端口（通常 http 请求的端口），监听的 IP 地址写你自己的"),t("strong",[s._v("服务器公网 IP")]),s._v("。")]),s._v(" "),t("p",[s._v("配置中有3个核心规则：")]),s._v(" "),t("ul",[t("li",[s._v("如果请求静态资源，则转发到对应目录中寻找静态资源")]),s._v(" "),t("li",[s._v("如果请求接口数据或后台页面，则转发给 Gunicorn")]),s._v(" "),t("li",[s._v("其他请求则直接请求 Vue 打包的前端文件")])]),s._v(" "),t("blockquote",[t("p",[s._v("如果你已经申请好域名了，就把配置中有 IP 的地方都修改为域名，比如：server_name www.deep-diary.com。")])]),s._v(" "),t("p",[s._v("写好后就退出 "),t("code",[s._v("vim")]),s._v(" 编辑器，回到命令行。因为我们写的只是 Nginx 的"),t("strong",[s._v("可用配置")]),s._v("，所以还需要把这个配置文件链接到"),t("strong",[s._v("在用配置")]),s._v("上去：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/etc/nginx/sites-available"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln -s /etc/nginx/sites-available/gallery /etc/nginx/sites-enabled")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" nginx restart //restart the nginx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("创建好软链接后，使用如下命令进行测试：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@deep-diary:/etc/nginx/sites-enabled"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln -s /etc/nginx/sites-available/DeepDiary /etc/nginx/sites-enabled")]),s._v("\nroot@deep-diary:/etc/nginx/sites-enabled"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nblog  DeepDiary\nroot@deep-diary:/etc/nginx/sites-enabled"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx -t")]),s._v("\nnginx: the configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" /etc/nginx/nginx.conf syntax is ok\nnginx: configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" /etc/nginx/nginx.conf "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" is successful\nroot@deep-diary:/etc/nginx/sites-enabled"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx -s reload")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"combine-the-blog-and-gallery"}},[s._v("combine the blog and gallery")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 未带www的请求，统一分发到https://www上")]),s._v("\nserver "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" ssl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name  deep-diary.com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("301")]),s._v(" https://www.deep-diary.com"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https gallery请求处理")]),s._v("\nserver "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  charset utf-8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" default_server ssl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# a duplicate default server for 0.0.0.0:443 in /etc/nginx/sites-enabled/deep-diary:12, so we need to delete the default_server")]),s._v("\n  server_name www.deep-diary.com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改成你的 IP")]),s._v("\n  ssl_certificate /etc/nginx/ssh/7968498_www.deep-diary.com.pem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  ssl_certificate_key /etc/nginx/ssh/7968498_www.deep-diary.com.key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义 server 的根路径")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改为你的项目的路径")]),s._v("\n  root /home/Backend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以下4项都是在给静态资源配置转发路径")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意路径名称一定要正确")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 特别是中横线 - 和下划线 _ 别弄混了")]),s._v("\n  location /static "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/collected_static"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  location /media "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/media"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  location /js "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/collected_static/js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  location /css "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/collected_static/css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  location /fonts "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/collected_static/fonts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  location /img "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" /home/Backend/collected_static/img"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将接口及后台请求转发给 Gunicorn")]),s._v("\n    location ~ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("^/api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("^/admin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    proxy_set_header Host "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_pass http://unix:/tmp/www.deep-diary.com.socket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改成你的 IP")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 其他所有请求均直接请求 Vue 打包的 html 文件")]),s._v("\n  location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    try_files /collected_static/index.html "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br")])]),t("h4",{attrs:{id:"常用命令"}},[s._v("常用命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("nginx -s reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"配置文件"}},[s._v("配置文件")]),s._v(" "),t("p",[s._v("配置文件位置：")]),s._v(" "),t("p",[s._v("/usr/local/nginx/conf/nginx.conf")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局块")]),s._v("\nworker_processes\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 处理并发的数量，越大，并发越多")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# events 块， 影响Nginx 服务器与用户的网络链接，比如：")]),s._v("\nworker_connections\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("：\t支持的最大连接数\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http 块")]),s._v("\nhttp 全局块\nserver 块 \nlocation 块\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"配置实例"}},[s._v("配置实例")]),s._v(" "),t("h5",{attrs:{id:"反向代理"}},[s._v("反向代理")]),s._v(" "),t("p",[s._v("开放端口")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("firewall-cmd --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp --permanent "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开放端口")]),s._v("\nfirewall-cmd --reload\nfirewall-cm --list-all  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看已经开发的端口")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tlisten\t\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9001")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\tserver_name\t"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".17.129\n\tlocation ~ /gallery/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\tproxy_pass http://127.0.0.1:8000\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    location ~ /blog/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        proxy_pass http://127.0.0.1:8001\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要开放上述端口")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("正则表达式")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20220901210958780.png",alt:"image-20220901210958780"}})]),s._v(" "),t("h5",{attrs:{id:"负载均衡"}},[s._v("负载均衡")]),s._v(" "),t("h5",{attrs:{id:"动静分离"}},[s._v("动静分离")]),s._v(" "),t("p",[s._v("启动nginx 服务")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(env) root@deep-diary:/home/deep_diary# sudo service nginx start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("现在我们就可以用公网ip来访问这个nginx引导页了，哈哈，小功告成，先喝口小咖啡！")]),s._v(" "),t("p",[s._v("前路漫漫，咱们接着继续努力")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/e09b1d4f98c84bbcb2a2dae071ce4780.png",alt:"Django搭建深度日记：将项目部署到服务器-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("Nginx 首页")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(env) root@deep-diary:/home/deep_diary# cd /etc/nginx/sites-available/\n(env) root@deep-diary:/etc/nginx/sites-available# ls\ndefault\n(env) root@deep-diary:/etc/nginx/sites-available# vi deep-diary.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("关于 vi 编辑器如何使用也不赘述了，这里只说两个最基本的操作：")]),s._v(" "),t("ul",[t("li",[s._v("按 i 切换到"),t("strong",[s._v("编辑模式")]),s._v("，这时候才可以进行输入、删除、修改等操作")]),s._v(" "),t("li",[s._v("按 Ctrl + c 退回到"),t("strong",[s._v("命令模式")]),s._v("，然后输入 :wq + Enter 保存文件修改并退回到服务器命令行")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/2132c92643004fb7a88f4dd81c8f37a4.png",alt:"Django搭建深度日记：将项目部署到服务器-深度日记官方网站"}})]),s._v(" "),t("p",[s._v("此配置会监听 80 端口（通常 http 请求的端口），监听的 IP 地址写你自己的"),t("strong",[s._v("服务器公网 IP")]),s._v("。")]),s._v(" "),t("p",[s._v("配置中有3个规则：")]),s._v(" "),t("ul",[t("li",[s._v("如果请求 static 路径则由 Nginx 转发到目录中寻找静态资源")]),s._v(" "),t("li",[s._v("如果请求 media 路径则由 Nginx 转发到目录中寻找媒体资源")]),s._v(" "),t("li",[s._v("其他请求则交给 Django 处理")])]),s._v(" "),t("blockquote",[t("p",[s._v("如果你已经申请好域名了，就把配置中有 IP 的地方都修改为域名，比如：server_name www.deep-diary.com;")])]),s._v(" "),t("p",[s._v("写好后就退出 vi 编辑器，回到命令行。因为我们写的只是 Nginx 的"),t("strong",[s._v("可用配置")]),s._v("，所以还需要把这个配置文件链接到"),t("strong",[s._v("在用配置")]),s._v("上去：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(env) root@deep-diary: sudo ln -s /etc/nginx/sites-available/deep-diary.com /etc/nginx/sites-enabled\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ln [参数][源文件或目录][目标文件或目录]")]),s._v(" "),t("p",[s._v("-s : 表示软链接符号，关于这个命令的更多参数，可以参考如下博文")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/huchong/p/9836325.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("linux每日命令(3)：ln命令 - 听风。 - 博客园"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("至此 Nginx 就配置好了，接下来搞定 Gunicorn。")]),s._v(" "),t("h4",{attrs:{id:"配置deepdiary"}},[s._v("配置DeepDiary")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 未带www的请求，统一分发到https://www上")]),s._v("\n\nserver "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" ssl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name  deep-diary.com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_certificate /etc/nginx/ssh/www.deep-diary.com.pem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_certificate_key /etc/nginx/ssh/www.deep-diary.com.key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("301")]),s._v(" https://www.deep-diary.com"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https gallery请求处理")]),s._v("\nserver "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  charset utf-8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" ssl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  server_name www.deep-diary.com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改成你的 IP")]),s._v("\n  ssl_certificate /etc/nginx/ssh/www.deep-diary.com.pem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  ssl_certificate_key /etc/nginx/ssh/www.deep-diary.com.key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义 server 的根路径")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改为你的项目的路径")]),s._v("\n  root /home/DeepDiary/Backend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以下4项都是在给静态资源配置转发路径")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意路径名称一定要正确")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 特别是中横线 - 和下划线 _ 别弄混了")]),s._v("\n  location /media "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# alias /home/DeepDiary/Backend/media;")]),s._v("\n    proxy_pass https://deep-diary.oss-cn-hangzhou.aliyuncs.com/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  location /static "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# alias /home/DeepDiary/Backend/collected_static/static;")]),s._v("\n    proxy_pass https://deep-diary.oss-cn-hangzhou.aliyuncs.com/static/static"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  location /favicon.ico "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# alias /home/DeepDiary/Backend//collected_static/favicon.ico;")]),s._v("\n    proxy_pass https://deep-diary.oss-cn-hangzhou.aliyuncs.com/static/favicon.ico"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将接口及后台请求转发给 Gunicorn")]),s._v("\n    location ~ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("^/api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("^/admin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    proxy_set_header Host "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_pass http://unix:/tmp/www.deep-diary.com.socket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改成你的 IP")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 其他所有请求均直接请求 Vue 打包的 html 文件")]),s._v("\n  location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   try_files /collected_static/index.html "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面这行代码不行，直接变成下载了")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# proxy_pass https://deep-diary.oss-cn-hangzhou.aliyuncs.com/frontend/dist/index.html;")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s gallery /etc/nginx/sites-enabled "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 写好后就退出 vim 编辑器，回到命令行。因为我们写的只是 Nginx 的可用配置，所以还需要把这个配置文件链接到在用配置上去：")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" nginx restart\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将 IP 改为你的公网 IP")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# .wsgi 前面为 Django 配置文件所在的目录名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ~$ gunicorn --bind unix:/tmp/121.43.166.145.socket deep_diary.wsgi:application\n\nModuleNotFoundError: No module named "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deep_diary'")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 报错")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h4",{attrs:{id:"配置脚本"}},[s._v("配置脚本")]),s._v(" "),t("p",[s._v("启动脚本")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/DeepDiary/Backend\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /home/venv_diary/bin/activate\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" deep_diary"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" gunicorn"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $2}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" --- the process is "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v(" ---\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Killed '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v('"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("部署后重启脚本")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将前端代码dist文件复制到frontend目录下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /home/venv_diary/bin/activate\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/DeepDiary\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -rf /home/DeepDiary/Frontend/dist /home/DeepDiary/Backend/frontend\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/DeepDiary/Backend\n\npython3 manage.py collectstatic --noinput\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ID=`ps -ef|grep deep_diary|grep gunicorn|awk '{print $2}'`")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("eep_diary"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $2}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" --- the process is "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v(" ---\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Killed '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v('"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动django服务器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动定时器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动异步任务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" gunicorn --bind unix:/tmp/www.deep-diary.com.socket deep_diary.wsgi:application"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" celery -A deep_diary beat"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" celery -A deep_diary worker --loglevel"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("info -P eventlet"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("eep_diary"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $2}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h3",{attrs:{id:"gunicorn"}},[s._v("Gunicorn")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:/etc/nginx/sites-enabled"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gunicorn --bind unix:/tmp/121.43.166.145.socket deep_diary.wsgi:appplication")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("(env) root@deep-diary:/home/deep_diary# pip3 install gunicorn\nLooking in indexes: http://mirrors.cloud.aliyuncs.com/pypi/simple/\nCollecting gunicorn\n  Downloading http://mirrors.cloud.aliyuncs.com/pypi/packages/e4/dd/5b190393e6066286773a67dfcc2f9492058e9b57c4867a95f1ba5caf0a83/gunicorn-20.1.0-py3-none-any.whl (79 kB)\n     |████████████████████████████████| 79 kB 20.2 MB/s \nRequirement already satisfied: setuptools>=3.0 in /usr/lib/python3/dist-packages (from gunicorn) (45.2.0)\nInstalling collected packages: gunicorn\nSuccessfully installed gunicorn-20.1.0\n(env) root@deep-diary:/home/deep_diary# sudo service nginx reload\n(env) root@deep-diary:/home/deep_diary# gunicorn --bind unix:/tmp/121.43.166.145.socket deep_diary.wsgi:application\n[2022-01-22 07:31:00 +0800] [57670] [INFO] Starting gunicorn 20.1.0\n[2022-01-22 07:31:00 +0800] [57670] [INFO] Listening at: unix:/tmp/121.43.166.145.socket (57670)\n[2022-01-22 07:31:00 +0800] [57670] [INFO] Using worker: sync\n[2022-01-22 07:31:00 +0800] [57673] [INFO] Booting worker with pid: 57673\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("这里的三个步骤分别是：")]),s._v(" "),t("ul",[t("li",[s._v("安装 Gunicorn")]),s._v(" "),t("li",[s._v("重启 Nginx 服务")]),s._v(" "),t("li",[s._v("启动 Gunicorn")])]),s._v(" "),t("p",[s._v("接下来，刷新浏览器试试，是不是很惊喜，自己开发的网站终于上线了")]),s._v(" "),t("h3",{attrs:{id:"使用脚本启动"}},[s._v("使用脚本启动")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/DeepDiary/Backend\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /home/venv_diary/bin/activate\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" deep_diary"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" gunicorn"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $2}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" --- the process is "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v(" ---\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Killed '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v('"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" gunicorn --bind unix:/tmp/www.deep-diary.com.socket deep_diary.wsgi:application"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("更新脚本")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /home/venv_diary/bin/activate\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/DeepDiary\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"test-the-result"}},[s._v("Test the result")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.43")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".166")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".145")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# api result")]),s._v("\nhttp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.43")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".166")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".145")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("admin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# admin")]),s._v("\nhttp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.43")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".166")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".145")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("static"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("favicon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ico  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http://121.43.166.145/static ---》related to the collected_static folder")]),s._v("\nhttp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.43")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".166")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".145")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("img"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("logo_lg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("8de80a86"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("png "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http://121.43.166.145/img/ ---》 related to the collected_static/img, which is the same for fonts, js, css")]),s._v("\n\n\nhttps"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("www"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("deep"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("img"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("logo_lg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("8de80a86"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("png\nhttps"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("www"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("deep"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("media"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("blue"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("img"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("07")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("04")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("IMG_20210704_225839"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jpg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"check-the-production-backend-ip"}},[s._v("check the production backend IP: "),t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20221123210941000.png",alt:"image-20221123210941000"}})]),s._v(" "),t("h4",{attrs:{id:"check-all-the-api-start-with-api"}},[s._v("check all the api start with /api/..."),t("img",{attrs:{src:"C:%5CUsers%5CBlue%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20221123211200464.png",alt:"image-20221123211200464"}})]),s._v(" "),t("h4",{attrs:{id:"check-the-role-of-the-user"}},[s._v("check the role of the user")]),s._v(" "),t("p",[s._v("at first, the role of the user is empty, then the the "),t("code",[s._v("api")]),s._v(" will back the 500 issue.")]),s._v(" "),t("p",[s._v("so we need to set the role of the user like "),t("strong",[t("code",[s._v("admin")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20221123211417981.png",alt:"image-20221123211417981"}})]),s._v(" "),t("p",[s._v("Since now, everything goes right, we could visit the web based on the ip")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20221123212338487.png",alt:"image-20221123212338487"}})]),s._v(" "),t("p",[s._v("开发的网站终于上线了")]),s._v(" "),t("p",[s._v("终于，大功告成了，可以洗脸睡觉了！！！")]),s._v(" "),t("h3",{attrs:{id:"unexpected-token"}},[s._v("Unexpected token '<'")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20221123203310882.png",alt:"image-20221123203310882"}})]),s._v(" "),t("p",[s._v("since the graph is based on "),t("code",[s._v("jquery")]),s._v(", however, here comes an error, couldn't find the "),t("code",[s._v("jquery")]),s._v(",")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.jianshu.com/p/6c3c33c43509",target:"_blank",rel:"noopener noreferrer"}},[s._v("Uncaught SyntaxError: Unexpected token < - 简书 (jianshu.com)"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"reason"}},[s._v("Reason")]),s._v(" "),t("p",[s._v("the related "),t("code",[s._v("css")]),s._v(" and "),t("code",[s._v("js")]),s._v(", not located in static folder")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("text/css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("./lib/interactive-graph-0.1.0/interactive-graph.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("src")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("./lib/jquery-3.2.1/jquery-3.2.1.min.js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token script"}}),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("./lib/jquery-3.2.1/jquery-ui.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("src")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("./lib/jquery-3.2.1/jquery-ui.js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token script"}}),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("./lib/font-awesome-4.7.0/css/font-awesome.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20221123204305722.png",alt:"image-20221123204305722"}})]),s._v(" "),t("h4",{attrs:{id:"solution"}},[s._v("Solution")]),s._v(" "),t("h5",{attrs:{id:"use-cdn-instead"}},[s._v("use CDN instead")]),s._v(" "),t("h5",{attrs:{id:"move-the-cssandjsout-of-lib"}},[s._v("move the "),t("code",[s._v("css")]),s._v("and"),t("code",[s._v("js")]),s._v("out of lib.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20221123205700193.png",alt:"image-20221123205700193"}})]),s._v(" "),t("p",[s._v("replace the "),t("code",[s._v("lib")]),s._v(" to "),t("code",[s._v("static")])]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("text/css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("<%= BASE_URL %>static/interactive-graph-0.1.0/interactive-graph.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("src")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("<%= BASE_URL %>static/jquery-3.2.1/jquery-3.2.1.min.js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("<%= BASE_URL %>static/jquery-3.2.1/jquery-ui.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("src")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("<%= BASE_URL %>static/jquery-3.2.1/jquery-ui.js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("<%= BASE_URL %>static/font-awesome-4.7.0/css/font-awesome.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h3",{attrs:{id:"uploading-issue"}},[s._v("uploading issue")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20221123232746578.png",alt:"image-20221123232746578"}})]),s._v(" "),t("h4",{attrs:{id:"solution-2"}},[s._v("solution")]),s._v(" "),t("p",[s._v("change"),t("code",[s._v("this.action")]),s._v(" before uploading")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("handleClose")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fileList "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("picture "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'picture'")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allImgNum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("imgNum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("imgSuccessNum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("imgErrorNum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// this.api = process.env.VUE_APP_BASE_API")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" baseURL\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("location"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("protocol"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("//")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("location"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("action "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("url     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("added")]),s._v("\n        console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'this.action:'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("action"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" baseURL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uploadFinished")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dialogFormVisible "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h4",{attrs:{id:"cudaexecutionprovider"}},[s._v("CUDAExecutionProvider")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("INFO: **************img instance have been created, saving face info now"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nINFO: insight face detecting the face now "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". \n/home/venv_diary/lib/python3.8/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py:55: UserWarning: Specified provider "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CUDAExecutionProvider'")]),s._v(" is not "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" available provider names.Available providers: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CPUExecutionProvider'")]),s._v("\n  warnings.warn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"Specified provider '{}' is not in available provider names.\"")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv_diary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@deep-diary:~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# python3")]),s._v("\nPython "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.8")]),s._v(".10 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default, Nov "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":14:08"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("GCC "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.3")]),s._v(".0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" on linux\nType "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"help"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"copyright"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"credits"')]),s._v(" or "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"license"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" information.\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" cv2\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" numpy as np\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" insightface\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" from insightface.app "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" FaceAnalysis\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" from insightface.data "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" get_image as ins_get_image\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" app "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" FaceAnalysis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("providers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CUDAExecutionProvider'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CPUExecutionProvider'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n/home/venv_diary/lib/python3.8/site-packages/onnxruntime/capi/onnxruntime_inference_collection.py:55: UserWarning: Specified provider "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CUDAExecutionProvider'")]),s._v(" is not "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" available provider names.Available providers: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CPUExecutionProvider'")]),s._v("\n  warnings.warn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"Specified provider '{}' is not in available provider names.\"")]),s._v("\nKilled\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h5",{attrs:{id:"reason-2"}},[s._v("Reason")]),s._v(" "),t("p",[s._v("the ECS out of memory")]),s._v(" "),t("p",[s._v("the insightface need nearly 700M memory")]),s._v(" "),t("h3",{attrs:{id:"prepare-a-bash"}},[s._v("prepare a bash")]),s._v(" "),t("p",[t("code",[s._v("vim deep-diary.sh")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /home/venv_diary/bin/activate\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/Backend\ngunicorn --bind unix:/tmp/121.43.166.145.socket deep_diary.wsgi:application\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("after prepare the "),t("code",[s._v("deep-diary.sh")]),s._v(" file, we need to change the mod")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" deep-diary.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"update-the-frontend"}},[s._v("update the frontend")]),s._v(" "),t("h4",{attrs:{id:"upload-the-dist-folder-to-home-backend-frontend-through-winscp"}},[s._v("upload the dist folder to "),t("code",[s._v("home/Backend/frontend")]),s._v(" through "),t("code",[s._v("WinSCP")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/Backend\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf ./collected_static\npython3 manage.py collectstatic\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" collected_static/static/* collected_static/  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#move the frontend static files to backend static folder")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" deep_diary"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" gunicorn"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $2}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" --- the process is "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v(" ---\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Killed '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ID")]),s._v('"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" gunicorn --bind unix:/tmp/121.43.166.145.socket deep_diary.wsgi:application"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" gunicorn --bind unix:/tmp/www.deep-diary.com.socket deep_diary.wsgi:application"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"接下来的工作"}},[s._v("接下来的工作")]),s._v(" "),t("ul",[t("li",[s._v("==后台人脸识别报错，需要单步调试==")]),s._v(" "),t("li",[s._v("==linux 端实现异步操作，开启图片信息提取==")]),s._v(" "),t("li",[s._v("==媒体资源部署道oss服务器==")])]),s._v(" "),t("p",[t("strong",[s._v("后期运维")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("通过WinSCP 上传更新后的代码到服务器\npython3 manage.py collectstatic  重新收集静态文件\npython3 manage.py migrate  如果数据库设计有变化，需要进行数据迁移\n# 重启 gunicorn\npkill gunicorn\ngunicorn --bind unix:/tmp/121.43.166.145.socket deep_diary.wsgi:application\nsudo service nginx reload   如果nginx 有所更改，需要执行此命令进行重新加载\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("这里执行一次代码更新，需要的命令很多，加上cd更改目录的指令，部署过程有十几条，后续可以考虑编写一个批处理脚步进行快速执行（待更新）。")]),s._v(" "),t("p",[t("strong",[s._v("域名及优化")])]),s._v(" "),t("p",[s._v("相对部署来说，域名配置就很容易了。阿里云提供域名的购买、备案（顶级域名必须，约10个工作日）、解析服务，简直全家桶有没有。重点提醒有了域名之后要改的地方：")]),s._v(" "),t("ul",[t("li",[s._v("settings.py 中的 ALLOWED_HOSTS")]),s._v(" "),t("li",[s._v("Nginx 中与 IP/域名 有关的位置")]),s._v(" "),t("li",[s._v("Gunicorn 中与 IP/域名 有关的位置")])]),s._v(" "),t("p",[s._v("域名搞定之后，接着就可以着手考虑把网站升级为 https 版本了，这是大趋势，一定要做。")]),s._v(" "),t("p",[s._v("另外，开发时为了效率把所有静态资源都下载到本地，但是部署时不推荐这样做，原因是静态文件通常体积都较大，你花血汗钱买的服务器载入会很慢。尽量远程 CDN 调用（这个会在后续文章发布）"),t("a",{attrs:{href:"https://www.bootcdn.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("BootCDN - Bootstrap 中文网开源项目免费 CDN 加速服务"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("下一节，咱们来唠唠深度日记网站的基本功能")]),s._v(" "),t("p",[s._v("鸣谢：本文参考了杜塞大神的博客教程，再次表示感谢")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.dusaiphoto.com/article/71/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Django搭建个人博客：将项目部署到服务器 - 杜赛的博客"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("新建数据库")]),s._v(" "),t("p",[s._v("至此，我们已经搞定了mysql数据库的连接，下一节，我们再一起尝试下项目部署")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.43")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".166")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".145")]),s._v("  一年的版本\nroot\nDeep"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("diary666\n\ndeep"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("diary 服务器\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.43")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".166")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".145")]),s._v(" \n密码 Deep"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("diary666\n\n数据库\nmysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u root "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("proot\nmysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u blue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pblue\n\n超级用户账号密码\ndeep"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("diary\ndeep"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("diary\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/yhjahjj1314/article/details/80998807",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ubuntu服务器版安装MySQL数据库_往事只能回味味道的博客-CSDN博客_ubuntu服务器装数据库"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/skh2015java/article/details/80156278",target:"_blank",rel:"noopener noreferrer"}},[s._v("ubuntu系统下mysql重置密码和修改密码操作_skh2015java的博客-CSDN博客_ubuntu重置mysql"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/java_cai_niao_han/article/details/110442608",target:"_blank",rel:"noopener noreferrer"}},[s._v("(10条消息) mysql8版本执行 grant all privileges on "),t("em",[s._v(".")]),s._v("  to  ‘root‘@‘%‘  identified by ‘root‘  with grant option； 会报错_java_cai_niao_han的博客-CSDN博客"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("授权远程登入")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mysql -h "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".5.116 -P "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(" -u root -p123456   //显示密码登陆\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("netstat -tln 查看服务器开放的端口号")]),s._v(" "),t("p",[s._v("通过"),t("code",[s._v("curl ifconfig.me")]),s._v("获取")]),s._v(" "),t("div",{staticClass:"language-reStructuredText line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("hostname -I\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("问题清单：\n(10条消息) ubuntu安装mysql后无法远程连接_zhangxiaohui4445的博客-CSDN博客\n解决无法远程连接mysql 问题\n1. 需要授权登入\n2. 阿里云需要开启相关的端口\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"icp备案"}},[s._v("ICP备案")]),s._v(" "),t("h3",{attrs:{id:"什么是icp备案"}},[s._v("什么是ICP备案")]),s._v(" "),t("p",[s._v("国家对非经营性互联网信息服务实行备案制度，对经营性互联网信息服务实行许可制度。未取得许可或者未履行备案手续的，不得从事互联网信息服务。即所有对中国大陆提供服务的网站都必须先进行ICP备案，才可开通服务。阿里云ICP代备案管理系统为您提供申请备案、修改注销备案信息、认领备案等服务。\n网站为什么要备案？")]),s._v(" "),t("p",[s._v("国家对互联网信息服务实行备案制度。国内的网站一律需要备案，否则不让开通。国家工信部要求中国境内（香港、澳门、台湾除外）所有服务器、网站空间供应商对于没有备案的域名一律不允许绑定到服务器。")]),s._v(" "),t("p",[s._v("备案后的网站搜索引擎在seo方面会有一定考虑，且可以用cdn加速，加快网站访问速度。")]),s._v(" "),t("p",[s._v("也就是说，虽然我们在阿里云后台设置了域名解析，但如果网站不进行备案，用户还是无法使用域名进行访问网站，备案号，可以更好地被各大搜索引擎收录。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/87b4eb58d0c643058d6f99715b55327a.png",alt:"Django搭建深度日记：ICP 备案一"}})]),s._v(" "),t("p",[s._v("设置域名解析")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/ffc478ea99f442788b3914209ed7c34d.png",alt:"Django搭建深度日记：ICP 备案一"}})]),s._v(" "),t("p",[s._v("无法访问网站")]),s._v(" "),t("h3",{attrs:{id:"开始icp备案"}},[s._v("开始ICP备案")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/a15c0203339141168f01e656f5c8a83f.png",alt:"Django搭建深度日记：ICP 备案一"}})]),s._v(" "),t("p",[s._v("开始备案")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://beian.aliyun.com/pcContainer/myorder",target:"_blank",rel:"noopener noreferrer"}},[s._v("阿里云登录 - 欢迎登录阿里云，安全稳定的云计算服务平台"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("开始备案后，一路填写相关信息")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/afd909b3ef0242f29b7e724f72797f46.png",alt:"Django搭建深度日记：ICP 备案一"}})]),s._v(" "),t("p",[s._v("个人相关信息填写完毕后，再使用app上传相关资料")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/71a14a7f1c9548bc96af17cd1b44084b.jpg",alt:"Django搭建深度日记：ICP 备案一"}})]),s._v(" "),t("p",[s._v("核对提交信息")]),s._v(" "),t("p",[s._v("到了这一步，该提交的资料都已经完成，就是这么简单！接下来就是等待阿里云初审了。")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("值得注意的是：网站开通后，需要在首页底部中间位置放置我们的ICP备案号并链接至“beian.miit.gov.cn”, 并在开通之日起30日内登陆全国互联网安全管理平台提交公安联网备案申请，获取《公安备案信息填写指南》。")]),s._v(" "),t("p",[s._v("期待下一节，分享备案成功后的喜悦！！！哈哈")]),s._v(" "),t("h3",{attrs:{id:"备案信息被驳回"}},[s._v("备案信息被驳回")]),s._v(" "),t("p",[s._v("备案过程中，这边有一个信息不符合被驳回一次：网站名称：深度日记官方账号，驳回的理由，就是个人备案，不能带官方账号等字眼。因此，更新后重新提交了。")]),s._v(" "),t("h3",{attrs:{id:"电话核验信息"}},[s._v("电话核验信息")]),s._v(" "),t("p",[s._v("提交域名备案后，一定要留意手机，阿里云工作小妹妹会电话你进行信息确认。")]),s._v(" "),t("p",[s._v("这边还挺感动的，是周日收到电话通知的。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/9bf0391b2e7644f3a741bc1e67731517.png",alt:"Django搭建深度日记：ICP 备案二"}})]),s._v(" "),t("p",[s._v("备案流程")]),s._v(" "),t("h3",{attrs:{id:"到工信部进行短信验证"}},[s._v("到工信部进行短信验证")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/3d7973eb725f47fc85e4374fb3573fe8.png",alt:"Django搭建深度日记：ICP 备案二"}})]),s._v(" "),t("p",[s._v("阿里云初审后，需要登入工信部进行验证")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/dacec9ea103947aa8f5e15437918190e.png",alt:"Django搭建深度日记：ICP 备案二"}})]),s._v(" "),t("p",[s._v("最后一步就是管局审核了")]),s._v(" "),t("h3",{attrs:{id:"管理局审核通过"}},[s._v("管理局审核通过")]),s._v(" "),t("p",[s._v("漫长的等待后，其实也就是一周的时间了，终于收到了管局的邮件：")]),s._v(" "),t("p",[s._v("您的ICP备案申请已通过审核，备案/许可证编号为：浙ICP备2022003145号，审核通过日期：2022-01-28。特此通知！【工信部ICP备案】")]),s._v(" "),t("p",[s._v("这是个幸福指数很高的邮件，哈哈！")]),s._v(" "),t("h3",{attrs:{id:"将备案号添加到网页"}},[s._v("将备案号添加到网页")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/2a4c1c2cf41647468b6f313bcf935c77.png",alt:"Django搭建深度日记：ICP 备案二"}})]),s._v(" "),t("p",[s._v("将备案号添加到网站底部")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<footer class="main-footer">\n    <strong>Copyright © 2021-2022 <a href="https://www.deep-diary.com">www.deep-diary.com</a>.</strong>\n    All rights reserved.\n    <a href="http://beian.miit.gov.cn/">浙ICP备2022003145号</a>\n</footer>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"更改服务器配置"}},[s._v("更改服务器配置")]),s._v(" "),t("p",[s._v("更改nginx配置文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd /etc/nginx/sites-available\ncat deep-diary.com \nroot@deep-diary:/etc/nginx/sites-available# cat deep-diary.com \nserver {\n  charset utf-8;\n  listen 80;\n  server_name www.deep-diary.com;  # 从IP 改成域名(修改一)\n\n  location /static {\n    alias /home/deep_diary/collected_static;\n  }\n\n  location /media {\n    alias /home/deep_diary/media;\n  }\n\n  location / {\n    proxy_set_header Host $host;\n    proxy_pass http://unix:/tmp/www.deep-diary.com.socket;  # 从IP 改成域名(修改二)\n  }\n}\nroot@deep-diary:/etc/nginx/sites-available# \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("重启nginx服务")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("service nginx reload   如果nginx 有所更改，需要执行此命令进行重新加载\ngunicorn --bind unix:/tmp/www.deep-diary.com.socket deep_diary.wsgi:application # 重新绑定gunicorn\n# (修改三)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("strong",[s._v("注意：")])]),s._v(" "),t("p",[s._v("如果gunicorn 无法启动成功，可能是没有进入虚拟环境中执行的原因，")]),s._v(" "),t("p",[s._v("因此，我们需要进入网站目录，执行"),t("em",[s._v("source env/bin/activate")]),s._v(" 启用虚拟环境，这个时候，命令行前面会多出（env），再按如下代码启动即可")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("root@deep-diary:/etc# gunicorn --bind unix:/tmp/www.deep-diary.com.socket deep_diary.wsgi:application\nTraceback (most recent call last):\n  File \"/usr/bin/gunicorn\", line 5, in <module>\n    from gunicorn.app.wsgiapp import run\nModuleNotFoundError: No module named 'gunicorn'\nroot@deep-diary:/etc# cd /home/deep_diary/\nroot@deep-diary:/home/deep_diary# source env/bin/activate\n(env) root@deep-diary:/home/deep_diary# gunicorn --bind unix:/tmp/www.deep-diary.com.socket deep_diary.wsgi:application\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"成果展示"}},[s._v("成果展示：")]),s._v(" "),t("p",[s._v("打完收工，一起来看下效果吧")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/6f23861dafd54fd78be0154800869d3e.png",alt:"Django搭建深度日记：ICP 备案二"}})]),s._v(" "),t("p",[s._v("终于可以使用这个域名进行访问了")]),s._v(" "),t("h3",{attrs:{id:"域名解析"}},[s._v("域名解析")]),s._v(" "),t("p",[s._v("备案号后，就可以正常使用域名进行访问了。当然，我们还可以创建二级域名，具体操作方式就是进入域名管理后台，添加相关记录，这个新的二级域名，可以指向不同的"),t("code",[s._v("IP")]),s._v("，也就是下图的记录值。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/1650634596878.png",alt:"1650634596878"}})]),s._v(" "),t("h2",{attrs:{id:"大文件上传"}},[s._v("大文件上传")]),s._v(" "),t("h3",{attrs:{id:"问题描述"}},[s._v("问题描述")]),s._v(" "),t("p",[s._v("在服务器上部署好网站好，开始准备尝试上传照片，结果报了一个403错误：上传的内容太大了。。。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/c26f2f2ce6f34f5da24e0ee817861907.png",alt:"Django搭建深度日记：问题清单-草根网站的痛点"}})]),s._v(" "),t("h3",{attrs:{id:"解决措施"}},[s._v("解决措施")]),s._v(" "),t("p",[s._v("1.打开nginx配置文件 nginx.conf, 路径一般是：/etc/nginx/nginx.conf。")]),s._v(" "),t("p",[s._v("2.在http{}段中加入 "),t("strong",[s._v("client_max_body_size 200m")]),s._v("; 200m为允许最大上传的大小。")]),s._v(" "),t("p",[s._v("3.保存后重启nginx，问题解决。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/4c7cf80d345f4295886edb5116d25e4f.png",alt:"Django搭建深度日记：问题清单-草根网站的痛点"}})]),s._v(" "),t("p",[s._v("增加上传最大容量的设置")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("root@deep-diary:/etc# cd nginx/\nroot@deep-diary:/etc/nginx# vi nginx.conf \nroot@deep-diary:/etc/nginx# ../init.d/nginx restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"抛出的新问题"}},[s._v("抛出的新问题")]),s._v(" "),t("p",[s._v("草根网站图片上传问题解决了，但由于上传的是原图，展示太卡，完全不可接受！")]),s._v(" "),t("h3",{attrs:{id:"解决措施-2"}},[s._v("解决措施")]),s._v(" "),t("ol",[t("li",[s._v("使用cdn 对静态资源加速")]),s._v(" "),t("li",[s._v("使用对象存储服务器，把图片保存到存储服务器中")]),s._v(" "),t("li",[s._v("上传图片的时候，对图片进行压缩")])]),s._v(" "),t("h2",{attrs:{id:"oss对象存储"}},[s._v("oss对象存储")]),s._v(" "),t("p",[s._v("上一章我们实现了网站的域名绑定，可以通过域名进行网页访问，但有一个头疼的问题是，图片资源动不动就好几个M，加载一张图片等地真心累，这样用户早就跑完了。")]),s._v(" "),t("p",[s._v("关于网站优化，有如下几个方法：")]),s._v(" "),t("ol",[t("li",[s._v("将图片等媒体文件放到oss服务器上")]),s._v(" "),t("li",[s._v("将静态文件放到oss服务器上或者使用cdn服务器进行加载")])]),s._v(" "),t("p",[s._v("本章先简单介绍下oss服务器。")]),s._v(" "),t("h3",{attrs:{id:"什么是oss对象存储"}},[s._v("什么是oss对象存储")]),s._v(" "),t("p",[s._v("对象存储服务（Object Storage Service，简称 OSS）为您提供基于网络的数据存取服务。使用 OSS，您可以通过网络随时存储和调用包括文本、图片、音频和视频等在内的各种非结构化数据文件。")]),s._v(" "),t("h3",{attrs:{id:"为什么要使用oss对象存储"}},[s._v("为什么要使用oss对象存储")]),s._v(" "),t("p",[s._v("对象存储可以简单理解为用来存储图片、音频、视频等非结构化数据的数据池。相对于主机服务器，具有读写速度快，利于分享的特点")]),s._v(" "),t("p",[s._v("阿里云OSS:海量、安全、低成本、高可靠的云存储服务，提供99.9999999999%的数据可靠性。使用RESTful API 可以在互联网任何位置存储和访问，容量和处理能力弹性扩展")]),s._v(" "),t("p",[s._v("1、网站数据动静分离，大幅提升网页性能")]),s._v(" "),t("p",[s._v("一般情况下，我们都是建议使用主机服务器和对象存储分工合作的方式来存储网站数据。主机服务器主要负责存储网站的动态数据，对象存储则用来存储网站的静态文件。从而实现网站的动静分离，当用户访问一个网站时，分别从主机服务器和对象存储的服务器同步读取数据，可以大幅的提升网页性能。")]),s._v(" "),t("p",[s._v("2、单独的文件管理界面，管理网站文件和本地电脑一样方便")]),s._v(" "),t("p",[s._v("无论是腾讯云、阿里云、杉岩，对象存储都有单独的管理控制台，腾讯云和阿里云还有专门的电脑客户端。你不必打开网站，就可以像使用百度云盘一样使用对象存储来管理你的网站文件，除了上传、下载、预览等常用功能，还可以直接在对象存储上进行图片处理/媒体转码/数据分析等。")]),s._v(" "),t("p",[s._v("3、本质是”内置大容量硬盘的分布式服务器“，同一个文件支持跨域共享")]),s._v(" "),t("p",[s._v("对象存储的本质是“内置大容量硬盘的分布式服务器”，对象存储有自己的 CPU、内存、网络和磁盘系统，具备一定的智能，同一个对象存储数据池可以新建不同的存储桶（bucket），分别用来存储不同网站的数据，彼此互不干扰。而且同一个文件可以引用到不同的网站，可以有效的减少数据冗余。")]),s._v(" "),t("p",[s._v("4、储存节点多，支持跨地域实时同步，实现异地容灾")]),s._v(" "),t("p",[s._v("假设你的图片等数据存储在你自己的服务器上，只能通过定期数据备份的方式保护你的数据。数据量大的话，每次备份都需要大量的时间和占用大量的磁盘空间，管理起来还不方便。")]),s._v(" "),t("p",[s._v("如果你的数据放置在对象存储的数据池了，并与网站关联。那么静态文件的备份就可以交给对象存储。你只需要对网站少量的动态文件进行备份。省时省力。")]),s._v(" "),t("p",[s._v("比如我使用对象存储，我在离我最近的节点【深圳】来存储网站的图片等静态文件。但是考虑到极端情况，比如深圳节点由于突然停电，可能导致数据全部丢失。但如果之前我选择了【杭州】作为第二个存储节点，而且设置【深圳】节点的数据实时增量同步到【杭州】节点。那么就算深圳节点的数据丢失了，但是我在杭州的数据还是可以使用。等到恢复供电，我再把数据从杭州节点同步回深圳节点就可以了。这就是我们说的异地容灾。")]),s._v(" "),t("p",[s._v("5、成本低，资源弹性伸缩，按需付费")]),s._v(" "),t("p",[s._v("对象存储不像服务器的流量是固定的，包含在服务器的费用里面了。无论你用或不用，都是这么多。对象存储可以是根据你的实际使用量进行计费。")]),s._v(" "),t("p",[s._v("6、节省服务器空间")]),s._v(" "),t("p",[s._v("为什么选择将这一点放在最后说呢？因为现在服务器的价格还算实惠，活动也比较多。大部分站长已经不存在服务器空间不够用的问题。而且对象存储的出现也不是为了解决服务器空间不够用的问题。而是为了结合【块存储】、【文件存储】各自的优点，从而实现高效的文件读写和分享。但是节省了服务器空间还是不争得事实，所以还是提一下吧。\n以上内容转载，原文详解末尾链接")]),s._v(" "),t("h3",{attrs:{id:"阿里云oss的相关配置"}},[s._v("阿里云oss的相关配置")]),s._v(" "),t("h4",{attrs:{id:"创建bucket"}},[s._v("创建bucket")]),s._v(" "),t("p",[s._v("这里的bucket就是所谓的存储空间，可以理解成云盘的根目录")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/1644409424161.png",alt:"1644409424161"}})]),s._v(" "),t("h4",{attrs:{id:"配置bucket"}},[s._v("配置Bucket")]),s._v(" "),t("p",[s._v("由于是个人网站，很多用户都可以查阅，因此这里的读写权限选择公共读。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/1644409506089.png",alt:"1644409506089"}})]),s._v(" "),t("h4",{attrs:{id:"上传文件到oss服务器"}},[s._v("上传文件到oss服务器")]),s._v(" "),t("p",[s._v("这里仅仅作为测试，后续肯定会用python实现自动上传相关媒体文件到服务器。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/1644409845284.png",alt:"1644409845284"}})]),s._v(" "),t("h4",{attrs:{id:"从服务器中获取照片"}},[s._v("从服务器中获取照片")]),s._v(" "),t("p",[t("strong",[s._v("示例代码")])]),s._v(" "),t("p",[s._v("以下代码用于将examplebucket中testfolder目录下的exampleobject.txt下载到本地D:\\localpath路径下的examplefile.txt。")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -*- coding: utf-8 -*-")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" oss2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM账号进行API访问或日常运维，请登录RAM控制台创建RAM账号。")]),s._v("\nauth "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yourAccessKeyId'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yourAccessKeySecret'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Endpoint以杭州为例，其它Region请按实际情况填写。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 填写Bucket名称，例如examplebucket。")]),s._v("\nbucket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://oss-cn-hangzhou.aliyuncs.com'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'examplebucket'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 填写Object完整路径，完整路径中不包含Bucket名称，例如testfolder/exampleobject.txt。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载Object到本地文件，并保存到指定的本地路径D:\\\\localpath\\\\examplefile.txt。如果指定的本地文件存在会覆盖，不存在则新建。")]),s._v("\nbucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_object_to_file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'testfolder/exampleobject.txt'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'D:\\\\localpath\\\\examplefile.txt'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("        \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("这里的bucket，就是阿里云存储对象，有很多属性，也可以对这个对象进行分页操作，同时，这个对象也有很多方法，比如上传，下载图片等，具体详解文章末尾链接的官网教程")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/1644419847400.png",alt:"1644419847400"}})]),s._v(" "),t("h4",{attrs:{id:"django-配置阿里云oss"}},[s._v("Django 配置阿里云oss")]),s._v(" "),t("h5",{attrs:{id:"安装依赖包"}},[s._v("安装依赖包")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pip install oss2\npip install django-oss-storage\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"添加-oss-配置"}},[s._v("添加 oss 配置")]),s._v(" "),t("p",[s._v("在settings.py 中添加 oss 配置，配置完毕后就会生效, 上传地址, 访问路径都会变成 oss 服务器上的")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("MEDIA_URL "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/media/'")]),s._v("\nMEDIA_ROOT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" os"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BASE_DIR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'media'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nOSS_ACCESS_KEY_ID "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("  \nOSS_ACCESS_KEY_SECRET "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("   \nOSS_ENDPOINT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"oss-accelerate.aliyuncs.com"')]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 访问域名, 根据服务器上的实际配置修改")]),s._v("\nOSS_BUCKET_NAME "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# oss 创建的 BUCKET 名称")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加下面配置后 Django admin 后台上传的 ImageField, FileField 类型的字段都会被自动上传到 oss 的服务器中, 访问路径也会自动替换# 如果注释掉的话 oss 的配置会失效, 上传文件会存储到本地, 且访问路径也会变成本地")]),s._v("\nDEFAULT_FILE_STORAGE "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django_oss_storage.backends.OssMediaStorage'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h4",{attrs:{id:"文件上传路径说明"}},[s._v("文件上传路径说明")]),s._v(" "),t("p",[s._v("如果开始设计的时候，是使用的本地media目录，现在无非就是把这个默认存储空间，转移到了阿里云bucket中的media目录，其它均可以保持不变。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/1645532036150.png",alt:"1645532036150"}})]),s._v(" "),t("h4",{attrs:{id:"监听相关操作"}},[s._v("监听相关操作")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Model"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    image "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("FileField"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("verbose_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"图片文件"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" upload_to"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"base/image/"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" null"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" blank"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该表删除操作时监听")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@receiver")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("post_delete"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sender"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Base"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete_upload_files")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),s._v("kwargs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 oss仓库 图片")]),s._v("\n    files "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("getattr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'image'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" files"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接 oss ")]),s._v("\n    auth "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OSS_ACCESS_KEY_ID"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OSS_ACCESS_KEY_SECRET"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取 bucket ")]),s._v("\n    bucket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OSS_ENDPOINT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OSS_BUCKET_NAME"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除文件")]),s._v("\n    bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("delete_object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("files"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该表更新/创建操作时监听")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@receiver")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("post_save"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sender"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Base"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("save_upload_files")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sender"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),s._v("kwargs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新 oss仓库 图片")]),s._v("\n    files "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("getattr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'image'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" files"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 要对图片进行处理的样式")]),s._v("\nstyle1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"image/crop,x_10,y_10,w_200,h_200,g_se"')]),s._v("\nstyle2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'image/resize,w_700,h_260,m_lfit'")]),s._v("\nstyle3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'image/resize,m_fixed,h_260,w_700'")]),s._v("\n\nauth "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OSS_ACCESS_KEY_ID"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OSS_ACCESS_KEY_SECRET"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nbucket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OSS_ENDPOINT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OSS_BUCKET_NAME"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nprocess "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{0}|sys/saveas,o_{1},b_{2}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("style"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                              oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("to_string"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("base64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("urlsafe_b64encode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                                                  oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("to_bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("file_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                              oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("to_string"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("base64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("urlsafe_b64encode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                                                  oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("to_bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("settings"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OSS_BUCKET_NAME"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新文件")]),s._v("\nbucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("process_object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("files"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br")])]),t("h3",{attrs:{id:"小结"}},[s._v("小结")]),s._v(" "),t("p",[s._v("现在图片等媒体文件可以上传到oss对象服务器了，是不是网站的访问速度就可以大大提高了呢？答案是有一定的作用，但还可以优化提速。")]),s._v(" "),t("p",[s._v("我们知道服务器加载静态资源还是蛮费时间的，学习了本章，是否可以考虑把静态资源也搬到oss上呢？")]),s._v(" "),t("p",[s._v("另外CDN也可以加快网站的访问速度，但具体快多少呢？下一节将揭晓答案。")]),s._v(" "),t("h3",{attrs:{id:"扩展阅读"}},[s._v("扩展阅读")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://gosspublic.alicdn.com/image/index.html?spm=a2c4g.11186623.0.0.7d203871dQExI3",target:"_blank",rel:"noopener noreferrer"}},[s._v("OSS图片处理6.0 (alicdn.com)"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://help.aliyun.com/document_detail/47660.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("OSS SDK 图片处理 (aliyun.com)"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/Doudou_Mylove/article/details/107221109",target:"_blank",rel:"noopener noreferrer"}},[s._v("为什么需要使用oss对象存储"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("[Django 配置阿里云oss]( "),t("a",{attrs:{href:"https://www.cnblogs.com/chaoqi/p/13903371.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("python - Django 配置阿里云 oss - _Q - 博客园 (cnblogs.com)"),t("OutboundLink")],1),s._v(" )")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/1644410042333.png",alt:"1644410042333"}}),s._v("创建")]),s._v(" "),t("h3",{attrs:{id:"网站加速"}},[s._v("网站加速")]),s._v(" "),t("p",[s._v("上一章我们将了提高网站访问速度的"),t("code",[s._v("2个方法")]),s._v("：")]),s._v(" "),t("ol",[t("li",[s._v("将图片等媒体文件放到oss服务器上")]),s._v(" "),t("li",[s._v("将静态文件放到oss服务器上或者使用cdn服务器进行加载")])]),s._v(" "),t("p",[s._v("本章我们来聊一聊如何优化网站的静态资源文件。")]),s._v(" "),t("p",[s._v("优化静态资源文件方法有很多，这里介绍2种方法：")]),s._v(" "),t("ol",[t("li",[s._v("将静态文件放到oss服务器上")]),s._v(" "),t("li",[s._v("使用CDN服务器进行加载")])]),s._v(" "),t("h4",{attrs:{id:"网站加速原理"}},[s._v("网站加速原理")]),s._v(" "),t("p",[s._v("我们传统网站，会把web服务器，静态资源，动态资源，媒体文件，都放在一个服务器中，因此加载就特别吃力，也无法解决地域问题（比如上海用户访问美国网站）")]),s._v(" "),t("h5",{attrs:{id:"把各个资源独立开来"}},[s._v("把各个资源独立开来")]),s._v(" "),t("p",[s._v("那样就不会那么拥挤，比如把如下每类资源，都放在独立的服务器上")]),s._v(" "),t("ul",[t("li",[s._v("web服务器")]),s._v(" "),t("li",[s._v("oss对象服务器")]),s._v(" "),t("li",[s._v("静态资源服务器（css，js）")]),s._v(" "),t("li",[s._v("动态资源服务器，这里主要指数据库了")])]),s._v(" "),t("h5",{attrs:{id:"把静态资源缓存到世界各地"}},[s._v("把静态资源缓存到世界各地")]),s._v(" "),t("p",[s._v("这样一来，用户就可以实现就近访问，实现加速，这就是大名鼎鼎的CDN原理")]),s._v(" "),t("p",[s._v("接下来我们就来了解下上述两种方法的具体实现过程吧。")]),s._v(" "),t("h4",{attrs:{id:"静态资源保存到oss服务器"}},[s._v("静态资源保存到oss服务器")]),s._v(" "),t("p",[s._v("这里还是以阿里云为例")]),s._v(" "),t("h5",{attrs:{id:"_1-安装依赖包"}},[s._v("1. 安装依赖包")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pip install oss2\npip install django-oss-storage\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h5",{attrs:{id:"添加-oss-配置-2"}},[s._v("添加 oss 配置")]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("settings.py")]),s._v(" 中添加 "),t("code",[s._v("oss")]),s._v("配置，以下配置完毕后就会生效, 上传地址, 访问路径都会变成 "),t("code",[s._v("oss")]),s._v("服务器上的,")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# settings.py ")]),s._v("\nOSS_ACCESS_KEY_ID "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("  \nOSS_ACCESS_KEY_SECRET "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("   \nOSS_ENDPOINT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"oss-accelerate.aliyuncs.com"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 访问域名, 根据服务器上的实际配置修改")]),s._v("\nOSS_BUCKET_NAME "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# oss 创建的 BUCKET 名称")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置上传的静态文件，需要上传静态文件的记得添加此项")]),s._v("\nSTATICFILES_STORAGE "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django_oss_storage.backends.OssStaticStorage'")]),s._v("\nSTATIC_URL "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/static/'")]),s._v("\nSTATIC_ROOT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'static'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h5",{attrs:{id:"文件上传路径说明-2"}},[s._v("文件上传路径说明")]),s._v(" "),t("p",[s._v("如果开始设计的时候，是使用的本地static目录，现在无非就是把这个默认存储空间，转移到了阿里云bucket中的static目录，其它均可以保持不变。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/1645534845185.png",alt:"1645534845185"}})]),s._v(" "),t("p",[s._v("这个操作可以理解为：当你加载一个网页的时候，静态资源从oss服务器过来，web数据从web服务器过来，类似多路并行加载，可以一定程度提高速度。")]),s._v(" "),t("h5",{attrs:{id:"常见问题"}},[s._v("常见问题")]),s._v(" "),t("p",[s._v("刚把静态资源上传到阿里云oss后，遇到了如下这个问题：")]),s._v(" "),t("p",[t("strong",[s._v("OSS跨域资源共享（CORS）出现报错的排查方法")]),s._v("，解决办法可以参考如下链接")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://help.aliyun.com/document_detail/44199.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("OSS跨域资源共享（CORS）出现报错的排查方法 (aliyun.com)"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"使用cdn进行网站加速"}},[s._v("使用CDN进行网站加速")]),s._v(" "),t("p",[s._v("将静态我呢见保存到oss服务器中，一定程度上是可以加速网站，但还是无法解决一个问题，就是oss服务器在广州，用户在北京，物理距离免不了会产生一些时延。")]),s._v(" "),t("p",[s._v("理想解决方案就是用户网文网页时，可以从北京附近的服务器加载相关资源文件，这就是CDN 的概念")]),s._v(" "),t("h5",{attrs:{id:"什么是cdn"}},[s._v("什么是CDN")]),s._v(" "),t("p",[s._v("CDN的全称是Content Delivery Network，即内容分发网络。其目的是通过在现有的Internet中增加一层新的网络架构，将网站的内容发布到最接近用户的网络“边缘”，使用户可以就近取得所需的内容，提高用户访问网站的响应速度。")]),s._v(" "),t("h5",{attrs:{id:"为什么要使用-cdn"}},[s._v("为什么要使用 CDN？")]),s._v(" "),t("ul",[t("li",[s._v("页面卡顿")]),s._v(" "),t("li",[s._v("高并发情况下服务器压力大")])]),s._v(" "),t("h5",{attrs:{id:"cdn-访问的两阶段"}},[s._v("CDN 访问的两阶段")]),s._v(" "),t("ol",[t("li",[s._v("域名解析")]),s._v(" "),t("li",[s._v("内容请求")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/cdn.png",alt:"CDN 访问的两阶段"}})]),s._v(" "),t("ol",[t("li",[s._v("使用云端的静态资源 （能够解决国外网站访问慢的问题）")]),s._v(" "),t("li",[s._v("使用 CDN 加速")])]),s._v(" "),t("h5",{attrs:{id:"免费的cdn资源网站"}},[s._v("免费的CDN资源网站")]),s._v(" "),t("p",[s._v("首屈一指的就是要推荐下面这个CDNJS了，原因很简单，在服务相对稳定下，它的的JS库是最完整的，很多很好的CDN都是同步它的仓库，这个直接导致其它大CDN服务商，都有JSLite 库了，太赞了。")]),s._v(" "),t("p",[t("strong",[s._v("CDNJS")])]),s._v(" "),t("p",[s._v("CDNJS提供非常完整的 JavaScript 库，无论是热门或是冷门的一应俱全。若你觉得它们缺少哪些好用的函式库，也可以自行提交到网站里，通过审核后就 CDNJS 就会为你分流 js文件！这项服务是结合 CloudFlare、Pingdom 与 S3Stat的，稳定性与速度自然不在话下。CDNJS提供的 JavaScript Libraries 全部列在网站首页，使用者可以直接搜索。这些JS库都有标示版本编号、标签以及原维护网站链结。")]),s._v(" "),t("p",[s._v("官网：http://www.cdnjs.com/")]),s._v(" "),t("p",[t("strong",[s._v("BootCDN")])]),s._v(" "),t("p",[s._v("BootCDN 是 Bootstrap中文网支持并维护的开源项目免费 CDN 服务，致力于为 Bootstrap、jQuery、Angular 一样优秀的开源项目提供稳定、快速的免费 CDN 服务。BootCDN 所收录的开源项目主要同步于 cdnjs 仓库。")]),s._v(" "),t("p",[s._v("官网：http://www.bootcdn.cn/")]),s._v(" "),t("p",[s._v("本网站大部分使用bootCDN，如果您的网站正好用了AdminLTE，那如下这些CDN资源就再适合你不过了。")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- web icon --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("shortcut  icon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://deep-diary.oss-cn-hangzhou.aliyuncs.com/media/sys_img/sys_img/favicon.ico"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("image/x-icon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- Google Font: Source Sans Pro --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- Font Awesome Icons --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- adminlte Theme style --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/admin-lte/3.2.0-rc/css/adminlte.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/admin-lte/3.2.0-rc/css/alt/adminlte.components.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/admin-lte/3.2.0-rc/css/alt/adminlte.core.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/admin-lte/3.2.0-rc/css/alt/adminlte.extra-components.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/admin-lte/3.2.0-rc/css/alt/adminlte.pages.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/admin-lte/3.2.0-rc/css/alt/adminlte.plugins.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 通知提醒样式 --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/layer/3.5.1/mobile/need/layer.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 极简滚动条插件 --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/overlayscrollbars/1.13.1/css/OverlayScrollbars.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 国旗图标 flag-icon-css --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("{% static "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("'")]),s._v("plugins/flag-icon-css/css/flag-icon.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("'")]),s._v(" %}"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--  鼠标悬停--\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/hover.css/2.3.1/css/hover-min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/imagehover.css/2.0.0/css/imagehover.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- icheck bootstrap --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("href")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https://cdn.bootcdn.net/ajax/libs/icheck-bootstrap/3.0.1/icheck-bootstrap.min.css"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("rel")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("stylesheet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[s._v("更多免费CDN网站，详解扩展阅读链接")]),s._v(" "),t("h4",{attrs:{id:"小结-2"}},[s._v("小结")]),s._v(" "),t("p",[s._v("对于使用一些免费的CDN资源，往往会出现无法加载的现场，有时候甚至没有从本地加载静态资源快，下一章，我们就用实验数据，分别测试下如下三种方法，到底哪种更快，快多少？")]),s._v(" "),t("h4",{attrs:{id:"扩展阅读-2"}},[s._v("扩展阅读：")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/52362950",target:"_blank",rel:"noopener noreferrer"}},[s._v("到底什么是CDN？ - 知乎 (zhihu.com)"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1355006",target:"_blank",rel:"noopener noreferrer"}},[s._v("推荐13个常用前端公共库CDN服务资源 - 云+社区 - 腾讯云 (tencent.com)"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://suyin-blog.club/2021/3RZJTFE/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Django - 让网站访问更快 | 苏寅 Blog (suyin-blog.club)"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/215753846",target:"_blank",rel:"noopener noreferrer"}},[s._v("什么是CDN，有什么作用 - 知乎 (zhihu.com)"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"更新记录"}},[s._v("更新记录")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Date")]),s._v(" "),t("th",[s._v("Updated Info")]),s._v(" "),t("th",[s._v("Address")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("2023-06-30")]),s._v(" "),t("td",[s._v("deploy the server again")]),s._v(" "),t("td",[s._v("@ home")])]),s._v(" "),t("tr",[t("td",[s._v("2023-8-17")]),s._v(" "),t("td",[s._v("部署到服务器，更新了nginx配置")]),s._v(" "),t("td",[s._v("@ home")])]),s._v(" "),t("tr",[t("td",[s._v("2023-8-18")]),s._v(" "),t("td",[s._v("静态文件使用oss，新增了部署脚本")]),s._v(" "),t("td",[s._v("@ home")])]),s._v(" "),t("tr",[t("td"),s._v(" "),t("td"),s._v(" "),t("td")]),s._v(" "),t("tr",[t("td"),s._v(" "),t("td"),s._v(" "),t("td")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);