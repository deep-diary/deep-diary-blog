(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{721:function(s,t,a){"use strict";a.r(t);var n=a(5),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("说明")]),s._v(" "),a("p",[s._v("​\t本文主要介绍imagebind的基本使用，实现以文搜图的功能")]),s._v(" "),a("p",[a("a",{attrs:{href:"www.deep-diary.com"}},[s._v("点击免费观看教学视频")])])]),s._v(" "),a("h1",{attrs:{id:"clip"}},[s._v("CLIP")]),s._v(" "),a("h2",{attrs:{id:"安装环境"}},[s._v("安装环境")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/99880204?from_voters_page=true",target:"_blank",rel:"noopener noreferrer"}},[s._v("Windows 安装 CUDA/cuDNN - 知乎 (zhihu.com)"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"安装cuda"}},[s._v("安装cuda")]),s._v(" "),a("p",[a("strong",[s._v("下载 CUDA")])]),s._v(" "),a("p",[s._v("去 NVIDIA 下载 CUDA，下载地址为："),a("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//developer.nvidia.com/cuda-downloads",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://developer.nvidia.com/cuda-downloads"),a("OutboundLink")],1),s._v("。本次使用的是 Windows10 64位，因此此处选择 Windows10 64位版本，为了安装方便选择 local 版本。默认的下载是最新版本的 CUDA")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20230526075710709.png",alt:"image-20230526075710709"}})]),s._v(" "),a("p",[s._v("若要下载其他版本的 CUDA，可以点击下面的 "),a("a",{attrs:{href:"https://link.zhihu.com/?target=https%3A//developer.nvidia.com/cuda-toolkit-archive",target:"_blank",rel:"noopener noreferrer"}},[s._v("Legacy Releases"),a("OutboundLink")],1),s._v("，下载自己需要的 CUDA：")]),s._v(" "),a("p",[s._v("11.8")]),s._v(" "),a("h3",{attrs:{id:"安装cudnn"}},[s._v("安装cuDNN")]),s._v(" "),a("p",[s._v("下载 cuDNN，下载之前需要先注册一下 Nvidia 的账号，下载地址为：[cudnn]("),a("a",{attrs:{href:"https://developer.nvidia.com/rdp/cudnn-download",target:"_blank",rel:"noopener noreferrer"}},[s._v("cuDNN Download | NVIDIA Developer"),a("OutboundLink")],1),s._v(") , 根据上面的对应关系，此处下载8.9.1版本：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20230526220612064.png",alt:"image-20230526220612064"}})]),s._v(" "),a("p",[s._v("下载完成之后将其解压，解压之后的目录如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/v2-e731184dd7b81e8d202156d00dd93de0_1440w.webp",alt:"img"}})]),s._v(" "),a("p",[s._v("需要将以上三个文件复制到CUDA的安装目录中，通过上面的安装，我们将CUDA安装到了 "),a("code",[s._v("C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.2")]),s._v("目录中：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/v2-c19b1beb2a98d8359e65b2c704d76351_1440w.webp",alt:"img"}})]),s._v(" "),a("p",[s._v("那么我们需要将：")]),s._v(" "),a("ul",[a("li",[s._v("cuDNN中"),a("code",[s._v("bin")]),s._v("目录下的文件移动到 CUDA 的 "),a("code",[s._v("bin")]),s._v(" 目录中")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/v2-a28e9a813ef01a8374743f7de7a83d2a_1440w.webp",alt:"img"}})]),s._v(" "),a("ul",[a("li",[s._v("cuDNN目录中的 "),a("code",[s._v("include")]),s._v(" 中的文件移动到 CUDA 的 "),a("code",[s._v("include")]),s._v(" 目录中")]),s._v(" "),a("li",[s._v("cuDNN目录中的 "),a("code",[s._v("lib")]),s._v(" 中的文件移动到 CUDA 的 "),a("code",[s._v("lib")]),s._v(" 目录中")])]),s._v(" "),a("p",[s._v("这样就完成了cuDNN的安装。")]),s._v(" "),a("h4",{attrs:{id:"验证安装"}},[s._v("验证安装")]),s._v(" "),a("p",[s._v("通过NVIDIA提供的 "),a("code",[s._v("deviceQuery.exe")]),s._v(" 和 "),a("code",[s._v("bandwidthTest.exe")]),s._v(" 来查看GPU的状态，两者均在安装目录的 "),a("code",[s._v("extras\\demo_suite")]),s._v("文件夹中")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/v2-9e325623d4303bef4242e03f5191109f_1440w.webp",alt:"img"}})]),s._v(" "),a("p",[s._v("打开命令窗口，可以用"),a("code",[s._v("cmd")]),s._v(", 或者"),a("code",[s._v("git bash")]),s._v(" , 首先运行 "),a("code",[s._v("deviceQuery.exe")]),s._v(" ，可以看到如下结果：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20230526221921088.png",alt:"image-20230526221921088"}})]),s._v(" "),a("p",[s._v("运行 "),a("code",[s._v("bandwidthTest.exe")]),s._v(" 看到如下结果：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20230526222151417.png",alt:"image-20230526222151417"}})]),s._v(" "),a("h3",{attrs:{id:"安装torch"}},[s._v("安装torch")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://pytorch.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PyTorch"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("img",{attrs:{src:"https://deep-diary.oss-cn-hangzhou.aliyuncs.com/blog/image-20230526222601527.png",alt:"image-20230526222601527"}})]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pip3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("==需要注意的是：cudnn, torch 的版本，都需要保持跟cuda版本一致，这里都是11.8==")]),s._v(" "),a("h3",{attrs:{id:"验证gpu效果"}},[s._v("验证GPU效果")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" torch\n\ndevice "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cuda"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cuda"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("is_available"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cpu"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Using {} device"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("结果输出 "),a("code",[s._v("Using cpu device")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("torch                     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\ntorchaudio                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("cu118\ntorchvision               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.15")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("由于安装了"),a("code",[s._v("sentence_transformers")]),s._v(", torch 等版本被自动安装了，结果GPU效果失效")]),s._v(" "),a("p",[s._v("因此，考虑把原来的torch 卸载掉重装")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pip uninstall torch torchvision torchaudio\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("再次执行")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pip3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("输出")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DiaryWin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("venv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Scripts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("python.exe D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DiaryWin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("clip.py \nUsing cuda device\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("大功告成")]),s._v(" "),a("h3",{attrs:{id:"安装imagebind运行环境"}},[s._v("安装imagebind运行环境")]),s._v(" "),a("p",[s._v("下载源码")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" PS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("BlueDoc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("DiaryWin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("img"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("ImageBind-main"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -r requirements.txt\n\npip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -r requirements.txt  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# need access into the source folder first")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("For windows users, you might need to install "),a("code",[s._v("soundfile")]),s._v(" for reading/writing audio files. (Thanks @congyue1977)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" soundfile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"简单实用"}},[s._v("简单实用")]),s._v(" "),a("p",[s._v("demo")]),s._v(" "),a("p",[s._v("Extract and compare features across modalities (e.g. Image, Text and Audio).")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" data\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" torch\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" models "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" imagebind_model\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("imagebind_model "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ModalityType\n\ntext_list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"A dog."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"A car"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"A bird"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nimage_paths"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".assets/dog_image.jpg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".assets/car_image.jpg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".assets/bird_image.jpg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\naudio_paths"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".assets/dog_audio.wav"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".assets/car_audio.wav"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".assets/bird_audio.wav"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\ndevice "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cuda:0"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cuda"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("is_available"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cpu"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Instantiate model")]),s._v("\nmodel "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" imagebind_model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("imagebind_huge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pretrained"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("eval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Load data")]),s._v("\ninputs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ModalityType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("TEXT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("load_and_transform_text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("text_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ModalityType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("VISION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("load_and_transform_vision_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("image_paths"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ModalityType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AUDIO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("load_and_transform_audio_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("audio_paths"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("no_grad"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    embeddings "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Vision x Text: "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("softmax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("embeddings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ModalityType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("VISION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" @ embeddings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ModalityType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("TEXT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("T"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dim"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Audio x Text: "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("softmax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("embeddings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ModalityType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AUDIO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" @ embeddings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ModalityType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("TEXT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("T"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dim"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Vision x Audio: "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    torch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("softmax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("embeddings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ModalityType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("VISION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" @ embeddings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ModalityType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AUDIO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("T"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dim"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Expected output:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Vision x Text:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tensor([[9.9761e-01, 2.3694e-03, 1.8612e-05],")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#         [3.3836e-05, 9.9994e-01, 2.4118e-05],")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#         [4.7997e-05, 1.3496e-02, 9.8646e-01]])")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Audio x Text:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tensor([[1., 0., 0.],")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#         [0., 1., 0.],")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#         [0., 0., 1.]])")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Vision x Audio:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tensor([[0.8070, 0.1088, 0.0842],")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#         [0.1036, 0.7884, 0.1079],")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#         [0.0018, 0.0022, 0.9960]])")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br")])]),a("h2",{attrs:{id:"报错"}},[s._v("报错")]),s._v(" "),a("h3",{attrs:{id:"描述"}},[s._v("描述")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("  note: This error originates from a subprocess, and is likely not a problem with pip.\n  ERROR: Failed building wheel "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" cartopy\nSuccessfully built pytorchvideo\nFailed to build mayavi cartopy\nERROR: Could not build wheels "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mayavi, cartopy, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" is required to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pyproject.toml-based projects\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"措施"}},[s._v("措施")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("Failed to build mayavi cartopy ERROR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Could "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" build wheels "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mayavi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cartopy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" which "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("is")]),s._v(" required to install pyproject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("toml"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("based projects I got the above issue when i install  a package by using pip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" how do I solve this issue\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ChatGPT：")]),s._v(" "),a("p",[s._v('The error message you encountered indicates that there were issues building the wheels for the packages "mayavi" and "cartopy" during the installation process. Building wheels is a step in the installation process where the source code of a package is compiled into binary code that can be executed on your specific system.')]),s._v(" "),a("p",[s._v("To resolve this issue, you can try the following steps:")]),s._v(" "),a("ol",[a("li",[s._v("Check your system requirements: Make sure your system meets all the requirements for building these packages. You may need to install additional dependencies or development tools. Refer to the documentation of each package for specific requirements.")]),s._v(" "),a("li",[s._v("Update pip and setuptools: Ensure that you have the latest versions of pip and setuptools installed on your system. Run the following commands to upgrade them:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cssCopy codepip install --upgrade pip\npip install --upgrade setuptools\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",[a("li",[s._v("Install package dependencies: Some packages require specific dependencies to be installed beforehand. Make sure you have all the necessary dependencies installed on your system. Refer to the documentation of each package for the required dependencies.")]),s._v(" "),a("li",[s._v("Install system-level dependencies: Certain packages may have system-level dependencies that need to be installed using a package manager like apt (for Ubuntu/Debian-based systems) or brew (for macOS). Again, refer to the documentation of each package for the specific dependencies and installation instructions.")]),s._v(" "),a("li",[s._v("Try a different installation method: If the above steps do not resolve the issue, you can try alternative installation methods. For example, you can download the source code of the packages and build them manually using the provided setup.py file. This can be done using the following commands:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("bashCopy codegit clone <repository-url>\ncd <package-directory>\npython setup.py install\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",[a("li",[s._v('Seek assistance: If you are still experiencing issues, it may be helpful to seek support from the package maintainers. Visit the official documentation, GitHub repository, or other community channels for the packages "mayavi" and "cartopy" to see if there are any known issues or if other users have encountered similar problems.')])]),s._v(" "),a("p",[s._v('By following these steps, you should be able to resolve the "Failed to build" error and successfully install the packages.')]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("根据chatGPT4的答复后，"),a("code",[s._v("mayavi")]),s._v(" 已经成功安装了， "),a("code",[s._v("cartopy")]),s._v("还是失败了")])])}),[],!1,null,null,null);t.default=e.exports}}]);