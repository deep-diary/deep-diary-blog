(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{754:function(t,s,n){"use strict";n.r(s);var e=n(5),a=Object(e.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"快速开启-nginx"}},[t._v("快速开启 Nginx")]),t._v(" "),n("h2",{attrs:{id:"一些重要的事"}},[t._v("一些重要的事")]),t._v(" "),n("h3",{attrs:{id:"防止泄漏"}},[t._v("防止泄漏")]),t._v(" "),n("p",[t._v("记得设置 "),n("code",[t._v("default_server")]),t._v("，否则在删除对应的 "),n("code",[t._v("conf")]),t._v(" 后可能导致不该出现的 "),n("code",[t._v("server")]),t._v(" 暴露出来。")]),t._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token directive"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token directive"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" default_server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在 listen 后追加，而非 server_name")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token directive"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  xxx.example.com example.com")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("h3",{attrs:{id:"禁止-ip-访问"}},[t._v("禁止 IP 访问")]),t._v(" "),n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token directive"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token directive"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" default_server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token directive"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v("   [::]:80 default_server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token directive"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  _")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token directive"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("444")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("h2",{attrs:{id:"安装-nginx"}},[t._v("安装 Nginx")]),t._v(" "),n("p",[t._v("虽然现在大部分时候都上 docker 了，但偶尔自己编译模块时手动安装还是比较方便的。")]),t._v(" "),n("h3",{attrs:{id:"_1-检测源"}},[t._v("1. 检测源")]),t._v(" "),n("p",[t._v("首先需要检查当前源是否有 Nginx（CentOS示例），当没有的时候需要自己添加源。")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("yum list "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" nginx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx.x86_64                             1:1.12.2-2.el7                  epel   ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx-all-modules.noarch                 1:1.12.2-2.el7                  epel   ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx-filesystem.noarch                  1:1.12.2-2.el7    ")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("h3",{attrs:{id:"_2-更新-yum-源并安装"}},[t._v("2. 更新 yum 源并安装")]),t._v(" "),n("p",[n("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),n("OutboundLink")],1),t._v(" 中 Nginx 稳定版本已经是 "),n("code",[t._v("1.20.1")]),t._v(" ，而检测结果依然是 "),n("code",[t._v("1.12.2")]),t._v("，"),n("a",{attrs:{href:"http://nginx.org/en/linux_packages.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("修改"),n("OutboundLink")],1),t._v(" yum 源来获取最新版。")]),t._v(" "),n("p",[t._v("更新 Nginx 的源在 "),n("RouterLink",{attrs:{to:"/os/centos/install-the-latest-version-of-nginx.html"}},[t._v("CentOS")]),t._v("、"),n("RouterLink",{attrs:{to:"/os/ubuntu/install-the-latest-version-of-nginx.html"}},[t._v("Ubuntu")]),t._v(" 中稍有不同，需要区别安装。")],1),t._v(" "),n("h3",{attrs:{id:"_3-编译安装"}},[t._v("3. 编译安装")]),t._v(" "),n("p",[t._v("当需要添加一些第三方模块时就可以使用该形式，以下为 "),n("code",[t._v("CentOS 7.6")]),t._v("。")]),t._v(" "),n("h4",{attrs:{id:"下载"}},[t._v("下载")]),t._v(" "),n("p",[t._v("进入"),n("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),n("OutboundLink")],1),t._v("获取对应的版本下载链接。")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://nginx.org/download/nginx-1.20.1.tar.gz\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf nginx-1.20.1.tar.gz "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解压")]),t._v("\nll nginx-1.20.1 "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 验证")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -r nginx-1.20.1/contrib/vim/* ~/.vim "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拷贝 vim 配置")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" nginx-1.20.1/conf/nginx.conf "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 验证")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("h4",{attrs:{id:"配置"}},[t._v("配置")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("./configure --help "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("less")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看帮助")]),t._v("\n./configure --prefix"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/shanyuhai/nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定目录")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可能会缺乏依赖（解决方案）")]),t._v("\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y httpd-devel pcre perl pcre-devel zlib zlib-devel GeoIP GeoIP-devel "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重新执行，当然也可以先使用 yum 安装自动获取一遍依赖（暂不清楚是否会导致负面影响）")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 结果如下")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# creating objs/Makefile # 新增目录")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx path prefix: "/home/shanyuhai/nginx"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx binary file: "/home/shanyuhai/nginx/sbin/nginx"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx modules path: "/home/shanyuhai/nginx/modules"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx configuration prefix: "/home/shanyuhai/nginx/conf"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx configuration file: "/home/shanyuhai/nginx/conf/nginx.conf"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx pid file: "/home/shanyuhai/nginx/logs/nginx.pid"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx error log file: "/home/shanyuhai/nginx/logs/error.log"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx http access log file: "/home/shanyuhai/nginx/logs/access.log"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx http client request body temporary files: "client_body_temp"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx http proxy temporary files: "proxy_temp"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx http fastcgi temporary files: "fastcgi_temp"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx http uwsgi temporary files: "uwsgi_temp"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# nginx http scgi temporary files: "scgi_temp"')]),t._v("\n\nll objs "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看稍后 make 的内容")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编译")]),t._v("\nll objs "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 验证")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装")]),t._v("\n\n/home/shanyuhai/nginx/sbin/nginx -V "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 验证")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br")])]),n("h2",{attrs:{id:"必须知道的基本操作"}},[t._v("必须知道的基本操作")]),t._v(" "),n("h3",{attrs:{id:"启用安全组"}},[t._v("启用安全组")]),t._v(" "),n("p",[t._v("在一顿操作之后，明明本地可以访问，为啥外网访问不了？可能是你忘记开放云服务器的安全组了。")]),t._v(" "),n("p",[t._v("操作流程：")]),t._v(" "),n("p",[n("code",[t._v("登录")]),t._v(" > "),n("code",[t._v("控制台")]),t._v(" > "),n("code",[t._v("云服务器ECS（左侧）")]),t._v(" > "),n("code",[t._v("安全组")]),t._v(" > "),n("code",[t._v("配置规则")]),t._v(" > "),n("code",[t._v("添加安全组规则")]),t._v(" > "),n("code",[t._v("填充内容")]),t._v(" > "),n("code",[t._v("确定")])]),t._v(" "),n("h3",{attrs:{id:"进程与端口"}},[t._v("进程与端口")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进程")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ps 是 Process Status 的简写，可以通过 ps 来查看对应的进程")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" -ef "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" nginx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 端口")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# netstat 是 net status 的简写， 可以查看有哪些端口正在被占用")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("netstat")]),t._v(" -lntup\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("h3",{attrs:{id:"启动"}},[t._v("启动")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 直接启动")]),t._v("\nnginx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# systemctl 启动")]),t._v("\nsystemctl start nginx.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开机自启")]),t._v("\nsystemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" nginx.service\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("h3",{attrs:{id:"停止"}},[t._v("停止")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# normal quit")]),t._v("\nnginx -s quit\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# force stop")]),t._v("\nnginx -s stop\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# systemctl")]),t._v("\nsystemctl stop nginx.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kill pid")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("killall")]),t._v(" nginx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 或")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v(" -9 pid\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("h3",{attrs:{id:"重启"}},[t._v("重启")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# normal")]),t._v("\nnginx -s reload\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# systemctl")]),t._v("\nsystemctl restart nginx.service\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("h2",{attrs:{id:"内置变量"}},[t._v("内置变量")]),t._v(" "),n("p",[t._v("Nginx 提供了丰富的"),n("a",{attrs:{href:"https://nginx.org/en/docs/varindex.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("内置变量"),n("OutboundLink")],1),t._v("，如果引入了其他模块还会有对应模块的变量。")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("variable")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("module")]),t._v(" "),n("th",[t._v("description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$args")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}}),t._v(" "),n("td",[t._v("请求参数")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$uri")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}}),t._v(" "),n("td",[t._v("当前请求的 "),n("code",[t._v("uri")]),t._v("，不带参数")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$request_uri")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}}),t._v(" "),n("td",[t._v("请求的 "),n("code",[t._v("uri")]),t._v("，带完整参数")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$host")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}}),t._v(" "),n("td",[t._v("请求报文的 "),n("code",[t._v("host")]),t._v(" 首部")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$hostname")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("ngx_http_core_module")])]),t._v(" "),n("td",[t._v("Nginx 服务运行在主机的主机名")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$remote_addr")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("ngx_stream_core_module")])]),t._v(" "),n("td",[t._v("客户端 IP")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$remote_port")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("ngx_stream_core_module")])]),t._v(" "),n("td",[t._v("客户端端口")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$request_filename")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}}),t._v(" "),n("td",[t._v("用户请求中的 "),n("code",[t._v("uri")]),t._v(" 经过本地 "),n("code",[t._v("root")]),t._v(" 或 "),n("code",[t._v("alias")]),t._v(" 映射后的本地文件路径。可将其加入 "),n("code",[t._v("log")]),t._v(" 中研究 "),n("code",[t._v("root")]),t._v(" 和 "),n("code",[t._v("alias")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$server_addr")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("ngx_stream_core_module")])]),t._v(" "),n("td",[t._v("服务器 IP")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$server_port")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("ngx_stream_core_module")])]),t._v(" "),n("td",[t._v("服务求端口")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$server_protocol")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}}),t._v(" "),n("td",[t._v("服务器的 HTTP 协议版本，例 "),n("code",[t._v("HTTP/1.0")]),t._v("、"),n("code",[t._v("HTTP/1.1")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("$scheme")])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}}),t._v(" "),n("td",[t._v("请求中的协议，例 "),n("code",[t._v("http")]),t._v("、"),n("code",[t._v("https")])])])])]),t._v(" "),n("p",[t._v("指定 "),n("code",[t._v("module")]),t._v(" 时基本上都有 "),n("code",[t._v("ngx_http_core_module")]),t._v("。")]),t._v(" "),n("h2",{attrs:{id:"参考资料"}},[t._v("参考资料")]),t._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"http://nginx.org/en/docs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("《精通Nginx》：Dimitri Aivaliotis 著")])])])}),[],!1,null,null,null);s.default=a.exports}}]);